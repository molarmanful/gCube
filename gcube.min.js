function ntscramble(t){var e="";return t.trim().replace(/{|}|\[|\]\(|\)/g,"").split(/\s+/).forEach(function(t){e+=2===t.length?"2"===t[1]?t[0]+t[0]:t[0].toLowerCase():3===t.length?t[0].toLowerCase()+t[0].toLowerCase():t[0]}),e}function ntsolve(t){var e="";return t.trim().replace(/{|}|\[|\]\(|\)/g,"").split(/\s+/).reverse().forEach(function(t){e+=2===t.length?"2"===t[1]?t[0]+t[0]:t[0].toLowerCase():3===t.length?t[0].toLowerCase()+t[0].toLowerCase():t[0]}),e}!function(){var t={};!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}t.prototype=window.Event.prototype,window.CustomEvent=t,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n})}(),t.extend=function(t,e){if(Object.keys)for(var i=Object.keys(e),r=0,n=i.length;n>r;r++){var s=i[r];Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}else for(s in i={}.hasOwnProperty,e)i.call(e,s)&&(t[s]=e[s]);return t},void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var e=e||function(){var t=[];return{REVISION:"12",getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){e=t.indexOf(e),-1!==e&&t.splice(e,1)},update:function(e){if(0===t.length)return!1;var i=0;for(e=void 0!==e?e:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();i<t.length;)t[i].update(e)?i++:t.splice(i,1);return!0}}}();e.Tween=function(t){var i,r={},n={},s={},o=1e3,a=0,c=!1,u=!1,h=0,l=null,d=e.Easing.Linear.None,f=e.Interpolation.Linear,b=[],p=null,m=!1,g=null,y=null;for(i in t)r[i]=parseFloat(t[i],10);this.to=function(t,e){return void 0!==e&&(o=e),n=t,this},this.start=function(i){e.add(this),u=!0,m=!1,l=void 0!==i?i:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),l+=h;for(var o in n){if(n[o]instanceof Array){if(0===n[o].length)continue;n[o]=[t[o]].concat(n[o])}r[o]=t[o],0==r[o]instanceof Array&&(r[o]*=1),s[o]=r[o]||0}return this},this.stop=function(){return u?(e.remove(this),u=!1,this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var t=0,e=b.length;e>t;t++)b[t].stop()},this.delay=function(t){return h=t,this},this.repeat=function(t){return a=t,this},this.yoyo=function(t){return c=t,this},this.easing=function(t){return d=t,this},this.interpolation=function(t){return f=t,this},this.chain=function(){return b=arguments,this},this.onStart=function(t){return p=t,this},this.onUpdate=function(t){return g=t,this},this.onComplete=function(t){return y=t,this},this.update=function(e){var i;if(l>e)return!0;!1===m&&(null!==p&&p.call(t),m=!0);var u=(e-l)/o,u=u>1?1:u,x=d(u);for(i in n){var w=r[i]||0,v=n[i];v instanceof Array?t[i]=f(v,x):("string"==typeof v&&(v=w+parseFloat(v,10)),"number"==typeof v&&(t[i]=w+(v-w)*x))}if(null!==g&&g.call(t,x),1==u){if(!(a>0)){for(null!==y&&y.call(t),i=0,u=b.length;u>i;i++)b[i].start(e);return!1}isFinite(a)&&a--;for(i in s)"string"==typeof n[i]&&(s[i]+=parseFloat(n[i],10)),c&&(u=s[i],s[i]=n[i],n[i]=u),r[i]=s[i];l=e+h}return!0}},e.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return 1>(t*=2)?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return 1>(t*=2)?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return 1>(t*=2)?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return 1>(t*=2)?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:1>(t*=2)?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)))},Out:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/.4)+1)},InOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),1>(t*=2)?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*.5+1)}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){return 1>(t*=2)?.5*t*t*(3.5949095*t-2.5949095):.5*((t-=2)*t*(3.5949095*t+2.5949095)+2)}},Bounce:{In:function(t){return 1-e.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*e.Easing.Bounce.In(2*t):.5*e.Easing.Bounce.Out(2*t-1)+.5}}},e.Interpolation={Linear:function(t,i){var r=t.length-1,n=r*i,s=Math.floor(n),o=e.Interpolation.Utils.Linear;return 0>i?o(t[0],t[1],n):i>1?o(t[r],t[r-1],r-n):o(t[s],t[s+1>r?r:s+1],n-s)},Bezier:function(t,i){var r,n=0,s=t.length-1,o=Math.pow,a=e.Interpolation.Utils.Bernstein;for(r=0;s>=r;r++)n+=o(1-i,s-r)*o(i,r)*t[r]*a(s,r);return n},CatmullRom:function(t,i){var r=t.length-1,n=r*i,s=Math.floor(n),o=e.Interpolation.Utils.CatmullRom;return t[0]===t[r]?(0>i&&(s=Math.floor(n=r*(1+i))),o(t[(s-1+r)%r],t[s],t[(s+1)%r],t[(s+2)%r],n-s)):0>i?t[0]-(o(t[0],t[0],t[1],t[1],-n)-t[0]):i>1?t[r]-(o(t[r],t[r],t[r-1],t[r-1],n-r)-t[r]):o(t[s?s-1:0],t[s],t[s+1>r?r:s+1],t[s+2>r?r:s+2],n-s)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,i){var r=e.Interpolation.Utils.Factorial;return r(t)/r(i)/r(t-i)},Factorial:function(){var t=[1];return function(e){var i,r=1;if(t[e])return t[e];for(i=e;i>1;i--)r*=i;return t[e]=r}}(),CatmullRom:function(t,e,i,r,n){t=.5*(i-t),r=.5*(r-e);var s=n*n;return(2*e-2*i+t+r)*n*s+(-3*e+3*i-2*t-r)*s+t*n+e}}};var i={REVISION:"66"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}},function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!self.requestAnimationFrame;++i)self.requestAnimationFrame=self[e[i]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[e[i]+"CancelAnimationFrame"]||self[e[i]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(e){var i=Date.now(),r=Math.max(0,16-(i-t)),n=self.setTimeout(function(){e(i+r)},r);return t=i+r,n}),void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(t){self.clearTimeout(t)})}(),i.CullFaceNone=0,i.CullFaceBack=1,i.CullFaceFront=2,i.CullFaceFrontBack=3,i.FrontFaceDirectionCW=0,i.FrontFaceDirectionCCW=1,i.BasicShadowMap=0,i.PCFShadowMap=1,i.PCFSoftShadowMap=2,i.FrontSide=0,i.BackSide=1,i.DoubleSide=2,i.NoShading=0,i.FlatShading=1,i.SmoothShading=2,i.NoColors=0,i.FaceColors=1,i.VertexColors=2,i.NoBlending=0,i.NormalBlending=1,i.AdditiveBlending=2,i.SubtractiveBlending=3,i.MultiplyBlending=4,i.CustomBlending=5,i.AddEquation=100,i.SubtractEquation=101,i.ReverseSubtractEquation=102,i.ZeroFactor=200,i.OneFactor=201,i.SrcColorFactor=202,i.OneMinusSrcColorFactor=203,i.SrcAlphaFactor=204,i.OneMinusSrcAlphaFactor=205,i.DstAlphaFactor=206,i.OneMinusDstAlphaFactor=207,i.DstColorFactor=208,i.OneMinusDstColorFactor=209,i.SrcAlphaSaturateFactor=210,i.MultiplyOperation=0,i.MixOperation=1,i.AddOperation=2,i.UVMapping=function(){},i.CubeReflectionMapping=function(){},i.CubeRefractionMapping=function(){},i.SphericalReflectionMapping=function(){},i.SphericalRefractionMapping=function(){},i.RepeatWrapping=1e3,i.ClampToEdgeWrapping=1001,i.MirroredRepeatWrapping=1002,i.NearestFilter=1003,i.NearestMipMapNearestFilter=1004,i.NearestMipMapLinearFilter=1005,i.LinearFilter=1006,i.LinearMipMapNearestFilter=1007,i.LinearMipMapLinearFilter=1008,i.UnsignedByteType=1009,i.ByteType=1010,i.ShortType=1011,i.UnsignedShortType=1012,i.IntType=1013,i.UnsignedIntType=1014,i.FloatType=1015,i.UnsignedShort4444Type=1016,i.UnsignedShort5551Type=1017,i.UnsignedShort565Type=1018,i.AlphaFormat=1019,i.RGBFormat=1020,i.RGBAFormat=1021,i.LuminanceFormat=1022,i.LuminanceAlphaFormat=1023,i.RGB_S3TC_DXT1_Format=2001,i.RGBA_S3TC_DXT1_Format=2002,i.RGBA_S3TC_DXT3_Format=2003,i.RGBA_S3TC_DXT5_Format=2004,i.EventDispatcher=function(){},i.EventDispatcher.prototype={constructor:i.EventDispatcher,apply:function(t){t.addEventListener=i.EventDispatcher.prototype.addEventListener,t.hasEventListener=i.EventDispatcher.prototype.hasEventListener,t.removeEventListener=i.EventDispatcher.prototype.removeEventListener,t.dispatchEvent=i.EventDispatcher.prototype.dispatchEvent},addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)?!0:!1},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners[t];if(void 0!==i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(){var t=[];return function(e){if(void 0!==this._listeners){var i=this._listeners[e.type];if(void 0!==i){e.target=this;for(var r=i.length,n=0;r>n;n++)t[n]=i[n];for(n=0;r>n;n++)t[n].call(this,e)}}}}()},i.Math={PI2:2*Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=Array(36),r=0;return function(){for(var n=0;36>n;n++)8==n||13==n||18==n||23==n?i[n]="-":14==n?i[n]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,i[n]=e[19==n?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return e>t?e:t>i?i:t},clampBottom:function(t,e){return e>t?e:t},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},smoothstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*(3-2*t))},smootherstep:function(t,e,i){return e>=t?0:t>=i?1:(t=(t-e)/(i-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},sign:function(t){return 0>t?-1:t>0?1:0},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}(),isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t}},i.Quaternion=function(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==r?r:1},i.Quaternion.prototype={constructor:i.Quaternion,_x:0,_y:0,_z:0,_w:0,_euler:void 0,_updateEuler:function(){void 0!==this._euler&&this._euler.setFromQuaternion(this,void 0,!1)},get x(){return this._x},set x(t){this._x=t,this._updateEuler()},get y(){return this._y},set y(t){this._y=t,this._updateEuler()},get z(){return this._z},set z(t){this._z=t,this._updateEuler()},get w(){return this._w},set w(t){this._w=t,this._updateEuler()},set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._updateEuler(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._w=t._w,this._updateEuler(),this},setFromEuler:function(t,e){if(0==t instanceof i.Euler)throw Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var r=Math.cos(t._x/2),n=Math.cos(t._y/2),s=Math.cos(t._z/2),o=Math.sin(t._x/2),a=Math.sin(t._y/2),c=Math.sin(t._z/2);return"XYZ"===t.order?(this._x=o*n*s+r*a*c,this._y=r*a*s-o*n*c,this._z=r*n*c+o*a*s,this._w=r*n*s-o*a*c):"YXZ"===t.order?(this._x=o*n*s+r*a*c,this._y=r*a*s-o*n*c,this._z=r*n*c-o*a*s,this._w=r*n*s+o*a*c):"ZXY"===t.order?(this._x=o*n*s-r*a*c,this._y=r*a*s+o*n*c,this._z=r*n*c+o*a*s,this._w=r*n*s-o*a*c):"ZYX"===t.order?(this._x=o*n*s-r*a*c,this._y=r*a*s+o*n*c,this._z=r*n*c-o*a*s,this._w=r*n*s+o*a*c):"YZX"===t.order?(this._x=o*n*s+r*a*c,this._y=r*a*s+o*n*c,this._z=r*n*c-o*a*s,this._w=r*n*s-o*a*c):"XZY"===t.order&&(this._x=o*n*s-r*a*c,this._y=r*a*s-o*n*c,this._z=r*n*c+o*a*s,this._w=r*n*s+o*a*c),!1!==e&&this._updateEuler(),this},setFromAxisAngle:function(t,e){var i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._updateEuler(),this},setFromRotationMatrix:function(t){var e=t.elements,i=e[0];t=e[4];var r=e[8],n=e[1],s=e[5],o=e[9],a=e[2],c=e[6],e=e[10],u=i+s+e;return u>0?(i=.5/Math.sqrt(u+1),this._w=.25/i,this._x=(c-o)*i,this._y=(r-a)*i,this._z=(n-t)*i):i>s&&i>e?(i=2*Math.sqrt(1+i-s-e),this._w=(c-o)/i,this._x=.25*i,this._y=(t+n)/i,this._z=(r+a)/i):s>e?(i=2*Math.sqrt(1+s-i-e),this._w=(r-a)/i,this._x=(t+n)/i,this._y=.25*i,this._z=(o+c)/i):(i=2*Math.sqrt(1+e-i-s),this._w=(n-t)/i,this._x=(r+a)/i,this._y=(o+c)/i,this._z=.25*i),this._updateEuler(),this},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._updateEuler(),this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this},multiply:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var i=t._x,r=t._y,n=t._z,s=t._w,o=e._x,a=e._y,c=e._z,u=e._w;return this._x=i*u+s*o+r*c-n*a,this._y=r*u+s*a+n*o-i*c,this._z=n*u+s*c+i*a-r*o,this._w=s*u-i*o-r*a-n*c,this._updateEuler(),this},multiplyVector3:function(t){return console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,e){var i=this._x,r=this._y,n=this._z,s=this._w,o=s*t._w+i*t._x+r*t._y+n*t._z;if(0>o?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;var a=Math.acos(o),c=Math.sqrt(1-o*o);return.001>Math.abs(c)?(this._w=.5*(s+this._w),this._x=.5*(i+this._x),this._y=.5*(r+this._y),this._z=.5*(n+this._z),this):(o=Math.sin((1-e)*a)/c,a=Math.sin(e*a)/c,this._w=s*o+this._w*a,this._x=i*o+this._x*a,this._y=r*o+this._y*a,this._z=n*o+this._z*a,this._updateEuler(),this)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],this._w=t[3],this._updateEuler(),this},toArray:function(){return[this._x,this._y,this._z,this._w]},clone:function(){return new i.Quaternion(this._x,this._y,this._z,this._w)}},i.Quaternion.slerp=function(t,e,i,r){return i.copy(t).slerp(e,r)},i.Vector2=function(t,e){this.x=t||0,this.y=e||0},i.Vector2.prototype={constructor:i.Vector2,set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},sub:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t):this.y=this.x=0,this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new i.Vector2,e=new i.Vector2),t.set(r,r),e.set(n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return t=this.y-t.y,e*e+t*t},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t){return this.x=t[0],this.y=t[1],this},toArray:function(){return[this.x,this.y]},clone:function(){return new i.Vector2(this.x,this.y)}},i.Vector3=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},i.Vector3.prototype={constructor:i.Vector3,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return 0==e instanceof i.Euler&&console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code."),void 0===t&&(t=new i.Quaternion),this.applyQuaternion(t.setFromEuler(e)),this}}(),applyAxisAngle:function(){var t;return function(e,r){return void 0===t&&(t=new i.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,r)),this}}(),applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6]*r,this.y=t[1]*e+t[4]*i+t[7]*r,this.z=t[2]*e+t[5]*i+t[8]*r,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*r+t[12],this.y=t[1]*e+t[5]*i+t[9]*r+t[13],this.z=t[2]*e+t[6]*i+t[10]*r+t[14],this},applyProjection:function(t){var e=this.x,i=this.y,r=this.z;t=t.elements;var n=1/(t[3]*e+t[7]*i+t[11]*r+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*r+t[12])*n,this.y=(t[1]*e+t[5]*i+t[9]*r+t[13])*n,this.z=(t[2]*e+t[6]*i+t[10]*r+t[14])*n,this},applyQuaternion:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,o=t.z;t=t.w;var a=t*e+s*r-o*i,c=t*i+o*e-n*r,u=t*r+n*i-s*e,e=-n*e-s*i-o*r;return this.x=a*t+e*-n+c*-o-u*-s,this.y=c*t+e*-s+u*-n-a*-o,this.z=u*t+e*-o+a*-s-c*-n,this},transformDirection:function(t){var e=this.x,i=this.y,r=this.z;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*r,this.y=t[1]*e+t[5]*i+t[9]*r,this.z=t[2]*e+t[6]*i+t[10]*r,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return 0!==t?(t=1/t,this.x*=t,this.y*=t,this.z*=t):this.z=this.y=this.x=0,this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(){var t,e;return function(r,n){return void 0===t&&(t=new i.Vector3,e=new i.Vector3),t.set(r,r,r),e.set(n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},cross:function(t,e){if(void 0!==e)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var i=this.x,r=this.y,n=this.z;return this.x=r*t.z-n*t.y,this.y=n*t.x-i*t.z,this.z=i*t.y-r*t.x,this},crossVectors:function(t,e){var i=t.x,r=t.y,n=t.z,s=e.x,o=e.y,a=e.z;return this.x=r*a-n*o,this.y=n*s-i*a,this.z=i*o-r*s,this},projectOnVector:function(){var t,e;return function(r){return void 0===t&&(t=new i.Vector3),t.copy(r).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new i.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new i.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){return t=this.dot(t)/(this.length()*t.length()),Math.acos(i.Math.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return t=this.z-t.z,e*e+i*i+t*t},setEulerFromRotationMatrix:function(){console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")},setEulerFromQuaternion:function(){console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")},getPositionFromMatrix:function(t){return console.warn("DEPRECATED: Vector3's .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("DEPRECATED: Vector3's .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("DEPRECATED: Vector3's .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),i=this.set(t.elements[4],t.elements[5],t.elements[6]).length();return t=this.set(t.elements[8],t.elements[9],t.elements[10]).length(),this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){var i=4*t,r=e.elements;return this.x=r[i],this.y=r[i+1],this.z=r[i+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t){return this.x=t[0],this.y=t[1],this.z=t[2],this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new i.Vector3(this.x,this.y,this.z)}},i.Box3=function(t,e){this.min=void 0!==t?t:new i.Vector3(1/0,1/0,1/0),this.max=void 0!==e?e:new i.Vector3(-1/0,-1/0,-1/0)},i.Box3.prototype={constructor:i.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},addPoint:function(t){t.x<this.min.x?this.min.x=t.x:t.x>this.max.x&&(this.max.x=t.x),t.y<this.min.y?this.min.y=t.y:t.y>this.max.y&&(this.max.y=t.y),t.z<this.min.z?this.min.z=t.z:t.z>this.max.z&&(this.max.z=t.z)},setFromPoints:function(t){if(0<t.length){var e=t[0];this.min.copy(e),this.max.copy(e);for(var e=1,i=t.length;i>e;e++)this.addPoint(t[e])}else this.makeEmpty();return this},setFromCenterAndSize:function(){var t=new i.Vector3;return function(e,i){var r=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(){var t=new i.Vector3;return function(e){var i=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){if(void 0!==e.geometry&&void 0!==e.geometry.vertices)for(var r=e.geometry.vertices,n=0,s=r.length;s>n;n++)t.copy(r[n]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){return(t||new i.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new i.Vector3).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z?!1:!0},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z?!0:!1},getParameter:function(t,e){return(e||new i.Vector3).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z?!1:!0},clampPoint:function(t,e){return(e||new i.Vector3).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i.Vector3;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new i.Vector3;return function(e){return e=e||new i.Sphere,e.center=this.center(),e.radius=.5*this.size(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3];return function(e){return t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.makeEmpty(),this.setFromPoints(t),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new i.Box3).copy(this)}},i.Sphere=function(t,e){this.center=void 0!==t?t:new i.Vector3,this.radius=void 0!==e?e:0},i.Sphere.prototype={constructor:i.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new i.Box3;return function(e,i){var r=this.center;void 0!==i?r.copy(i):t.setFromPoints(e).center(r);for(var n=0,s=0,o=e.length;o>s;s++)n=Math.max(n,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(n),this}}(),copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},clampPoint:function(t,e){var r=this.center.distanceToSquared(t),n=e||new i.Vector3;return n.copy(t),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){return t=t||new i.Box3,t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius},clone:function(){return(new i.Sphere).copy(this)}},i.Euler=function(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._order=n||i.Euler.DefaultOrder},i.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),i.Euler.DefaultOrder="XYZ",i.Euler.prototype={constructor:i.Euler,_x:0,_y:0,_z:0,_order:i.Euler.DefaultOrder,_quaternion:void 0,_updateQuaternion:function(){void 0!==this._quaternion&&this._quaternion.setFromEuler(this,!1)
},get x(){return this._x},set x(t){this._x=t,this._updateQuaternion()},get y(){return this._y},set y(t){this._y=t,this._updateQuaternion()},get z(){return this._z},set z(t){this._z=t,this._updateQuaternion()},get order(){return this._order},set order(t){this._order=t,this._updateQuaternion()},set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._order=r||this._order,this._updateQuaternion(),this},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._updateQuaternion(),this},setFromRotationMatrix:function(t,e){function i(t){return Math.min(Math.max(t,-1),1)}var r=t.elements,n=r[0],s=r[4],o=r[8],a=r[1],c=r[5],u=r[9],h=r[2],l=r[6],r=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(o)),.99999>Math.abs(o)?(this._x=Math.atan2(-u,r),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(l,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(u)),.99999>Math.abs(u)?(this._y=Math.atan2(o,r),this._z=Math.atan2(a,c)):(this._y=Math.atan2(-h,n),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(l)),.99999>Math.abs(l)?(this._y=Math.atan2(-h,r),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(a,n))):"ZYX"===e?(this._y=Math.asin(-i(h)),.99999>Math.abs(h)?(this._x=Math.atan2(l,r),this._z=Math.atan2(a,n)):(this._x=0,this._z=Math.atan2(-s,c))):"YZX"===e?(this._z=Math.asin(i(a)),.99999>Math.abs(a)?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,n)):(this._x=0,this._y=Math.atan2(o,r))):"XZY"===e?(this._z=Math.asin(-i(s)),.99999>Math.abs(s)?(this._x=Math.atan2(l,c),this._y=Math.atan2(o,n)):(this._x=Math.atan2(-u,r),this._y=0)):console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: "+e),this._order=e,this._updateQuaternion(),this},setFromQuaternion:function(t,e,i){function r(t){return Math.min(Math.max(t,-1),1)}var n=t.x*t.x,s=t.y*t.y,o=t.z*t.z,a=t.w*t.w;return e=e||this._order,"XYZ"===e?(this._x=Math.atan2(2*(t.x*t.w-t.y*t.z),a-n-s+o),this._y=Math.asin(r(2*(t.x*t.z+t.y*t.w))),this._z=Math.atan2(2*(t.z*t.w-t.x*t.y),a+n-s-o)):"YXZ"===e?(this._x=Math.asin(r(2*(t.x*t.w-t.y*t.z))),this._y=Math.atan2(2*(t.x*t.z+t.y*t.w),a-n-s+o),this._z=Math.atan2(2*(t.x*t.y+t.z*t.w),a-n+s-o)):"ZXY"===e?(this._x=Math.asin(r(2*(t.x*t.w+t.y*t.z))),this._y=Math.atan2(2*(t.y*t.w-t.z*t.x),a-n-s+o),this._z=Math.atan2(2*(t.z*t.w-t.x*t.y),a-n+s-o)):"ZYX"===e?(this._x=Math.atan2(2*(t.x*t.w+t.z*t.y),a-n-s+o),this._y=Math.asin(r(2*(t.y*t.w-t.x*t.z))),this._z=Math.atan2(2*(t.x*t.y+t.z*t.w),a+n-s-o)):"YZX"===e?(this._x=Math.atan2(2*(t.x*t.w-t.z*t.y),a-n+s-o),this._y=Math.atan2(2*(t.y*t.w-t.x*t.z),a+n-s-o),this._z=Math.asin(r(2*(t.x*t.y+t.z*t.w)))):"XZY"===e?(this._x=Math.atan2(2*(t.x*t.w+t.y*t.z),a-n+s-o),this._y=Math.atan2(2*(t.x*t.z+t.y*t.w),a+n-s-o),this._z=Math.asin(r(2*(t.z*t.w-t.x*t.y)))):console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: "+e),this._order=e,!1!==i&&this._updateQuaternion(),this},reorder:function(){var t=new i.Quaternion;return function(e){t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._updateQuaternion(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},clone:function(){return new i.Euler(this._x,this._y,this._z,this._order)}},i.Matrix3=function(t,e,i,r,n,s,o,a,c){this.elements=new Float32Array(9),this.set(void 0!==t?t:1,e||0,i||0,r||0,void 0!==n?n:1,s||0,o||0,a||0,void 0!==c?c:1)},i.Matrix3.prototype={constructor:i.Matrix3,set:function(t,e,i,r,n,s,o,a,c){var u=this.elements;return u[0]=t,u[3]=e,u[6]=i,u[1]=r,u[4]=n,u[7]=s,u[2]=o,u[5]=a,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(t){return t=t.elements,this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(t){return console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){var t=new i.Vector3;return function(e){for(var i=0,r=e.length;r>i;i+=3)t.x=e[i],t.y=e[i+1],t.z=e[i+2],t.applyMatrix3(this),e[i]=t.x,e[i+1]=t.y,e[i+2]=t.z;return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],c=t[7],t=t[8];return e*s*t-e*o*c-i*n*t+i*o*a+r*n*c-r*s*a},getInverse:function(t,e){var i=t.elements,r=this.elements;if(r[0]=i[10]*i[5]-i[6]*i[9],r[1]=-i[10]*i[1]+i[2]*i[9],r[2]=i[6]*i[1]-i[2]*i[5],r[3]=-i[10]*i[4]+i[6]*i[8],r[4]=i[10]*i[0]-i[2]*i[8],r[5]=-i[6]*i[0]+i[2]*i[4],r[6]=i[9]*i[4]-i[5]*i[8],r[7]=-i[9]*i[0]+i[1]*i[8],r[8]=i[5]*i[0]-i[1]*i[4],i=i[0]*r[0]+i[1]*r[3]+i[2]*r[6],0===i){if(e)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/i),this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},clone:function(){var t=this.elements;return new i.Matrix3(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])}},i.Matrix4=function(t,e,i,r,n,s,o,a,c,u,h,l,d,f,b,p){var m=this.elements=new Float32Array(16);m[0]=void 0!==t?t:1,m[4]=e||0,m[8]=i||0,m[12]=r||0,m[1]=n||0,m[5]=void 0!==s?s:1,m[9]=o||0,m[13]=a||0,m[2]=c||0,m[6]=u||0,m[10]=void 0!==h?h:1,m[14]=l||0,m[3]=d||0,m[7]=f||0,m[11]=b||0,m[15]=void 0!==p?p:1},i.Matrix4.prototype={constructor:i.Matrix4,set:function(t,e,i,r,n,s,o,a,c,u,h,l,d,f,b,p){var m=this.elements;return m[0]=t,m[4]=e,m[8]=i,m[12]=r,m[1]=n,m[5]=s,m[9]=o,m[13]=a,m[2]=c,m[6]=u,m[10]=h,m[14]=l,m[3]=d,m[7]=f,m[11]=b,m[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(t){return this.elements.set(t.elements),this},extractPosition:function(t){return console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractRotation:function(){var t=new i.Vector3;return function(e){var i=this.elements;e=e.elements;var r=1/t.set(e[0],e[1],e[2]).length(),n=1/t.set(e[4],e[5],e[6]).length(),s=1/t.set(e[8],e[9],e[10]).length();return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i[4]=e[4]*n,i[5]=e[5]*n,i[6]=e[6]*n,i[8]=e[8]*s,i[9]=e[9]*s,i[10]=e[10]*s,this}}(),makeRotationFromEuler:function(t){0==t instanceof i.Euler&&console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var e=this.elements,r=t.x,n=t.y,s=t.z,o=Math.cos(r),r=Math.sin(r),a=Math.cos(n),n=Math.sin(n),c=Math.cos(s),s=Math.sin(s);if("XYZ"===t.order){t=o*c;var u=o*s,h=r*c,l=r*s;e[0]=a*c,e[4]=-a*s,e[8]=n,e[1]=u+h*n,e[5]=t-l*n,e[9]=-r*a,e[2]=l-t*n,e[6]=h+u*n,e[10]=o*a}else"YXZ"===t.order?(t=a*c,u=a*s,h=n*c,l=n*s,e[0]=t+l*r,e[4]=h*r-u,e[8]=o*n,e[1]=o*s,e[5]=o*c,e[9]=-r,e[2]=u*r-h,e[6]=l+t*r,e[10]=o*a):"ZXY"===t.order?(t=a*c,u=a*s,h=n*c,l=n*s,e[0]=t-l*r,e[4]=-o*s,e[8]=h+u*r,e[1]=u+h*r,e[5]=o*c,e[9]=l-t*r,e[2]=-o*n,e[6]=r,e[10]=o*a):"ZYX"===t.order?(t=o*c,u=o*s,h=r*c,l=r*s,e[0]=a*c,e[4]=h*n-u,e[8]=t*n+l,e[1]=a*s,e[5]=l*n+t,e[9]=u*n-h,e[2]=-n,e[6]=r*a,e[10]=o*a):"YZX"===t.order?(t=o*a,u=o*n,h=r*a,l=r*n,e[0]=a*c,e[4]=l-t*s,e[8]=h*s+u,e[1]=s,e[5]=o*c,e[9]=-r*c,e[2]=-n*c,e[6]=u*s+h,e[10]=t-l*s):"XZY"===t.order&&(t=o*a,u=o*n,h=r*a,l=r*n,e[0]=a*c,e[4]=-s,e[8]=n*c,e[1]=t*s+l,e[5]=o*c,e[9]=u*s-h,e[2]=h*s-u,e[6]=r*c,e[10]=l*s+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},setRotationFromQuaternion:function(t){return console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code."),this.makeRotationFromQuaternion(t)},makeRotationFromQuaternion:function(t){var e=this.elements,i=t.x,r=t.y,n=t.z,s=t.w,o=i+i,a=r+r,c=n+n;t=i*o;var u=i*a,i=i*c,h=r*a,r=r*c,n=n*c,o=s*o,a=s*a,s=s*c;return e[0]=1-(h+n),e[4]=u-s,e[8]=i+a,e[1]=u+s,e[5]=1-(t+n),e[9]=r-o,e[2]=i-a,e[6]=r+o,e[10]=1-(t+h),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t=new i.Vector3,e=new i.Vector3,r=new i.Vector3;return function(i,n,s){var o=this.elements;return r.subVectors(i,n).normalize(),0===r.length()&&(r.z=1),t.crossVectors(s,r).normalize(),0===t.length()&&(r.x+=1e-4,t.crossVectors(s,r).normalize()),e.crossVectors(r,t),o[0]=t.x,o[4]=e.x,o[8]=r.x,o[1]=t.y,o[5]=e.y,o[9]=r.y,o[2]=t.z,o[6]=e.z,o[10]=r.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var i=t.elements,r=e.elements,n=this.elements,s=i[0],o=i[4],a=i[8],c=i[12],u=i[1],h=i[5],l=i[9],d=i[13],f=i[2],b=i[6],p=i[10],m=i[14],g=i[3],y=i[7],x=i[11],i=i[15],w=r[0],v=r[4],I=r[8],E=r[12],M=r[1],S=r[5],D=r[9],k=r[13],_=r[2],z=r[6],F=r[10],R=r[14],T=r[3],C=r[7],O=r[11],r=r[15];return n[0]=s*w+o*M+a*_+c*T,n[4]=s*v+o*S+a*z+c*C,n[8]=s*I+o*D+a*F+c*O,n[12]=s*E+o*k+a*R+c*r,n[1]=u*w+h*M+l*_+d*T,n[5]=u*v+h*S+l*z+d*C,n[9]=u*I+h*D+l*F+d*O,n[13]=u*E+h*k+l*R+d*r,n[2]=f*w+b*M+p*_+m*T,n[6]=f*v+b*S+p*z+m*C,n[10]=f*I+b*D+p*F+m*O,n[14]=f*E+b*k+p*R+m*r,n[3]=g*w+y*M+x*_+i*T,n[7]=g*v+y*S+x*z+i*C,n[11]=g*I+y*D+x*F+i*O,n[15]=g*E+y*k+x*R+i*r,this},multiplyToArray:function(t,e,i){var r=this.elements;return this.multiplyMatrices(t,e),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},multiplyVector3:function(t){return console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){var t=new i.Vector3;return function(e){for(var i=0,r=e.length;r>i;i+=3)t.x=e[i],t.y=e[i+1],t.z=e[i+2],t.applyProjection(this),e[i]=t.x,e[i+1]=t.y,e[i+2]=t.z;return e}}(),rotateAxis:function(t){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},determinant:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],s=t[1],o=t[5],a=t[9],c=t[13],u=t[2],h=t[6],l=t[10],d=t[14];return t[3]*(+n*a*h-r*c*h-n*o*l+i*c*l+r*o*d-i*a*d)+t[7]*(+e*a*d-e*c*l+n*s*l-r*s*d+r*c*u-n*a*u)+t[11]*(+e*c*h-e*o*d-n*s*h+i*s*d+n*o*u-i*c*u)+t[15]*(-r*o*u-e*a*h+e*o*l+r*s*h-i*s*l+i*a*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},flattenToArrayOffset:function(t,e){var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t},getPosition:function(){var t=new i.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return t.set(e[12],e[13],e[14])}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,r=t.elements,n=r[0],s=r[4],o=r[8],a=r[12],c=r[1],u=r[5],h=r[9],l=r[13],d=r[2],f=r[6],b=r[10],p=r[14],m=r[3],g=r[7],y=r[11],r=r[15];if(i[0]=h*p*g-l*b*g+l*f*y-u*p*y-h*f*r+u*b*r,i[4]=a*b*g-o*p*g-a*f*y+s*p*y+o*f*r-s*b*r,i[8]=o*l*g-a*h*g+a*u*y-s*l*y-o*u*r+s*h*r,i[12]=a*h*f-o*l*f-a*u*b+s*l*b+o*u*p-s*h*p,i[1]=l*b*m-h*p*m-l*d*y+c*p*y+h*d*r-c*b*r,i[5]=o*p*m-a*b*m+a*d*y-n*p*y-o*d*r+n*b*r,i[9]=a*h*m-o*l*m-a*c*y+n*l*y+o*c*r-n*h*r,i[13]=o*l*d-a*h*d+a*c*b-n*l*b-o*c*p+n*h*p,i[2]=u*p*m-l*f*m+l*d*g-c*p*g-u*d*r+c*f*r,i[6]=a*f*m-s*p*m-a*d*g+n*p*g+s*d*r-n*f*r,i[10]=s*l*m-a*u*m+a*c*g-n*l*g-s*c*r+n*u*r,i[14]=a*u*d-s*l*d-a*c*f+n*l*f+s*c*p-n*u*p,i[3]=h*f*m-u*b*m-h*d*g+c*b*g+u*d*y-c*f*y,i[7]=s*b*m-o*f*m+o*d*g-n*b*g-s*d*y+n*f*y,i[11]=o*u*m-s*h*m-o*c*g+n*h*g+s*c*y-n*u*y,i[15]=s*h*d-o*u*d+o*c*f-n*h*f-s*c*b+n*u*b,i=n*i[0]+c*i[4]+d*i[8]+m*i[12],0==i){if(e)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/i),this},translate:function(){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},scale:function(t){var e=this.elements,i=t.x,r=t.y;return t=t.z,e[0]*=i,e[4]*=r,e[8]*=t,e[1]*=i,e[5]*=r,e[9]*=t,e[2]*=i,e[6]*=r,e[10]*=t,e[3]*=i,e[7]*=r,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],Math.max(t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10])))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=1-i,s=t.x,o=t.y,a=t.z,c=n*s,u=n*o;return this.set(c*s+i,c*o-r*a,c*a+r*o,0,c*o+r*a,u*o+i,u*a-r*s,0,c*a-r*o,u*a+r*s,n*a*a+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t=new i.Vector3,e=new i.Matrix4;return function(i,r,n){var s=this.elements,o=t.set(s[0],s[1],s[2]).length(),a=t.set(s[4],s[5],s[6]).length(),c=t.set(s[8],s[9],s[10]).length();0>this.determinant()&&(o=-o),i.x=s[12],i.y=s[13],i.z=s[14],e.elements.set(this.elements),i=1/o;var s=1/a,u=1/c;return e.elements[0]*=i,e.elements[1]*=i,e.elements[2]*=i,e.elements[4]*=s,e.elements[5]*=s,e.elements[6]*=s,e.elements[8]*=u,e.elements[9]*=u,e.elements[10]*=u,r.setFromRotationMatrix(e),n.x=o,n.y=a,n.z=c,this}}(),makeFrustum:function(t,e,i,r,n,s){var o=this.elements;return o[0]=2*n/(e-t),o[4]=0,o[8]=(e+t)/(e-t),o[12]=0,o[1]=0,o[5]=2*n/(r-i),o[9]=(r+i)/(r-i),o[13]=0,o[2]=0,o[6]=0,o[10]=-(s+n)/(s-n),o[14]=-2*s*n/(s-n),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(t,e,r,n){t=r*Math.tan(i.Math.degToRad(.5*t));var s=-t;return this.makeFrustum(s*e,t*e,s,t,r,n)},makeOrthographic:function(t,e,i,r,n,s){var o=this.elements,a=e-t,c=i-r,u=s-n;return o[0]=2/a,o[4]=0,o[8]=0,o[12]=-((e+t)/a),o[1]=0,o[5]=2/c,o[9]=0,o[13]=-((i+r)/c),o[2]=0,o[6]=0,o[10]=-2/u,o[14]=-((s+n)/u),o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},clone:function(){var t=this.elements;return new i.Matrix4(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])}},i.Object3D=function(){this.id=i.Object3DIdCount++,this.uuid=i.Math.generateUUID(),this.name="",this.parent=void 0,this.children=[],this.up=new i.Vector3(0,1,0),this.position=new i.Vector3,this._rotation=new i.Euler,this._quaternion=new i.Quaternion,this.scale=new i.Vector3(1,1,1),this._rotation._quaternion=this.quaternion,this._quaternion._euler=this.rotation,this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new i.Matrix4,this.matrixWorld=new i.Matrix4,this.visible=this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.userData={}},i.Object3D.prototype={constructor:i.Object3D,get rotation(){return this._rotation},set rotation(t){this._rotation=t,this._rotation._quaternion=this._quaternion,this._quaternion._euler=this._rotation,this._rotation._updateQuaternion()},get quaternion(){return this._quaternion},set quaternion(t){this._quaternion=t,this._quaternion._euler=this._rotation,this._rotation._quaternion=this._quaternion,this._quaternion._updateEuler()},get eulerOrder(){return console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order},set eulerOrder(t){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order=t},get useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(t){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new i.Quaternion;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new i.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new i.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new i.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new i.Vector3;return function(e,i){return t.copy(e),t.applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translate:function(t,e){return console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed."),this.translateOnAxis(e,t)},translateX:function(){var t=new i.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new i.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new i.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new i.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new i.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(t===this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");else if(t instanceof i.Object3D){void 0!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t);for(var e=this;void 0!==e.parent;)e=e.parent;void 0!==e&&e instanceof i.Scene&&e.__addObject(t)}},remove:function(t){var e=this.children.indexOf(t);if(-1!==e){for(t.parent=void 0,t.dispatchEvent({type:"removed"}),this.children.splice(e,1),e=this;void 0!==e.parent;)e=e.parent;void 0!==e&&e instanceof i.Scene&&e.__removeObject(t)}},traverse:function(t){t(this);for(var e=0,i=this.children.length;i>e;e++)this.children[e].traverse(t)},getObjectById:function(t,e){for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i];if(n.id===t||!0===e&&(n=n.getObjectById(t,e),void 0!==n))return n}},getObjectByName:function(t,e){for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i];if(n.name===t||!0===e&&(n=n.getObjectByName(t,e),void 0!==n))return n}},getChildByName:function(t,e){return console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t,e)},getDescendants:function(t){void 0===t&&(t=[]),Array.prototype.push.apply(t,this.children);for(var e=0,i=this.children.length;i>e;e++)this.children[e].getDescendants(t);return t},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===t)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=0,i=this.children.length;i>e;e++)this.children[e].updateMatrixWorld(t)},clone:function(t,e){if(void 0===t&&(t=new i.Object3D),void 0===e&&(e=!0),t.name=this.name,t.up.copy(this.up),t.position.copy(this.position),t.quaternion.copy(this.quaternion),t.scale.copy(this.scale),t.renderDepth=this.renderDepth,t.rotationAutoUpdate=this.rotationAutoUpdate,t.matrix.copy(this.matrix),t.matrixWorld.copy(this.matrixWorld),t.matrixAutoUpdate=this.matrixAutoUpdate,t.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,t.visible=this.visible,t.castShadow=this.castShadow,t.receiveShadow=this.receiveShadow,t.frustumCulled=this.frustumCulled,t.userData=JSON.parse(JSON.stringify(this.userData)),!0===e)for(var r=0;r<this.children.length;r++)t.add(this.children[r].clone());return t}},i.EventDispatcher.prototype.apply(i.Object3D.prototype),i.Object3DIdCount=0,i.Camera=function(){i.Object3D.call(this),this.matrixWorldInverse=new i.Matrix4,this.projectionMatrix=new i.Matrix4},i.Camera.prototype=Object.create(i.Object3D.prototype),i.Camera.prototype.lookAt=function(){var t=new i.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),i.Camera.prototype.clone=function(t){return void 0===t&&(t=new i.Camera),i.Object3D.prototype.clone.call(this,t),t.matrixWorldInverse.copy(this.matrixWorldInverse),t.projectionMatrix.copy(this.projectionMatrix),t},i.PerspectiveCamera=function(t,e,r,n){i.Camera.call(this),this.fov=void 0!==t?t:50,this.aspect=void 0!==e?e:1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype=Object.create(i.Camera.prototype),i.PerspectiveCamera.prototype.setLens=function(t,e){void 0===e&&(e=24),this.fov=2*i.Math.radToDeg(Math.atan(e/(2*t))),this.updateProjectionMatrix()},i.PerspectiveCamera.prototype.setViewOffset=function(t,e,i,r,n,s){this.fullWidth=t,this.fullHeight=e,this.x=i,this.y=r,this.width=n,this.height=s,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var t=this.fullWidth/this.fullHeight,e=Math.tan(i.Math.degToRad(.5*this.fov))*this.near,r=-e,n=t*r,t=Math.abs(t*e-n),r=Math.abs(e-r);this.projectionMatrix.makeFrustum(n+this.x*t/this.fullWidth,n+(this.x+this.width)*t/this.fullWidth,e-(this.y+this.height)*r/this.fullHeight,e-this.y*r/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},i.PerspectiveCamera.prototype.clone=function(){var t=new i.PerspectiveCamera;return i.Camera.prototype.clone.call(this,t),t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t},i.Ray=function(t,e){this.origin=void 0!==t?t:new i.Vector3,this.direction=void 0!==e?e:new i.Vector3},i.Ray.prototype={constructor:i.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new i.Vector3).copy(this.direction).multiplyScalar(t).add(this.origin)},recast:function(){var t=new i.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var r=e||new i.Vector3;r.subVectors(t,this.origin);var n=r.dot(this.direction);return 0>n?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(){var t=new i.Vector3;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return 0>i?this.origin.distanceTo(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceTo(e))}}(),distanceSqToSegment:function(t,e,i,r){var n=t.clone().add(e).multiplyScalar(.5),s=e.clone().sub(t).normalize(),o=.5*t.distanceTo(e),a=this.origin.clone().sub(n);t=-this.direction.dot(s),e=a.dot(this.direction);var c,u,h=-a.dot(s),l=a.lengthSq(),d=Math.abs(1-t*t);return d>=0?(a=t*h-e,c=t*e-h,u=o*d,a>=0?c>=-u?u>=c?(o=1/d,a*=o,c*=o,t=a*(a+t*c+2*e)+c*(t*a+c+2*h)+l):(c=o,a=Math.max(0,-(t*c+e)),t=-a*a+c*(c+2*h)+l):(c=-o,a=Math.max(0,-(t*c+e)),t=-a*a+c*(c+2*h)+l):-u>=c?(a=Math.max(0,-(-t*o+e)),c=a>0?-o:Math.min(Math.max(-o,-h),o),t=-a*a+c*(c+2*h)+l):u>=c?(a=0,c=Math.min(Math.max(-o,-h),o),t=c*(c+2*h)+l):(a=Math.max(0,-(t*o+e)),c=a>0?o:Math.min(Math.max(-o,-h),o),t=-a*a+c*(c+2*h)+l)):(c=t>0?-o:o,a=Math.max(0,-(t*c+e)),t=-a*a+c*(c+2*h)+l),i&&i.copy(this.direction.clone().multiplyScalar(a).add(this.origin)),r&&r.copy(s.clone().multiplyScalar(c).add(n)),t},isIntersectionSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},isIntersectionPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e?!0:!1},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0==e?0==t.distanceToPoint(this.origin)?0:null:(t=-(this.origin.dot(t.normal)+t.constant)/e,t>=0?t:null)},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},isIntersectionBox:function(){var t=new i.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectBox:function(t,e){var i,r,n,s,o;r=1/this.direction.x,s=1/this.direction.y,o=1/this.direction.z;var a=this.origin;return r>=0?(i=(t.min.x-a.x)*r,r*=t.max.x-a.x):(i=(t.max.x-a.x)*r,r*=t.min.x-a.x),s>=0?(n=(t.min.y-a.y)*s,s*=t.max.y-a.y):(n=(t.max.y-a.y)*s,s*=t.min.y-a.y),i>s||n>r?null:((n>i||i!==i)&&(i=n),(r>s||r!==r)&&(r=s),o>=0?(n=(t.min.z-a.z)*o,o*=t.max.z-a.z):(n=(t.max.z-a.z)*o,o*=t.min.z-a.z),i>o||n>r?null:((n>i||i!==i)&&(i=n),(r>o||r!==r)&&(r=o),0>r?null:this.at(i>=0?i:r,e)))},intersectTriangle:function(){var t=new i.Vector3,e=new i.Vector3,r=new i.Vector3,n=new i.Vector3;return function(i,s,o,a,c){if(e.subVectors(s,i),r.subVectors(o,i),n.crossVectors(e,r),s=this.direction.dot(n),s>0){if(a)return null;a=1}else{if(!(0>s))return null;a=-1,s=-s}return t.subVectors(this.origin,i),i=a*this.direction.dot(r.crossVectors(t,r)),0>i?null:(o=a*this.direction.dot(e.cross(t)),0>o||i+o>s?null:(i=-a*t.dot(n),0>i?null:this.at(i/s,c)))}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)},clone:function(){return(new i.Ray).copy(this)}},i.Plane=function(t,e){this.normal=void 0!==t?t:new i.Vector3(1,0,0),this.constant=void 0!==e?e:0},i.Plane.prototype={constructor:i.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new i.Vector3,e=new i.Vector3;return function(i,r,n){return r=t.subVectors(n,r).cross(e.subVectors(i,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,i),this}}(),copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var r=this.distanceToPoint(t);return(e||new i.Vector3).copy(this.normal).multiplyScalar(r)},isIntersectionLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&t>0||0>t&&e>0},intersectLine:function(){var t=new i.Vector3;return function(e,r){var n=r||new i.Vector3,s=e.delta(t),o=this.normal.dot(s);return 0!=o?(o=-(e.start.dot(this.normal)+this.constant)/o,0>o||o>1?void 0:n.copy(s).multiplyScalar(o).add(e.start)):0==this.distanceToPoint(e.start)?n.copy(e.start):void 0}}(),coplanarPoint:function(t){return(t||new i.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new i.Vector3,e=new i.Vector3,r=new i.Matrix3;return function(i,n){var s=n||r.getNormalMatrix(i),s=t.copy(this.normal).applyMatrix3(s),o=this.coplanarPoint(e);return o.applyMatrix4(i),this.setFromNormalAndCoplanarPoint(s,o),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant==this.constant},clone:function(){return(new i.Plane).copy(this)}},i.CSS3DObject=function(t){i.Object3D.call(this),this.element=t,this.done=!1,this.element.style.position="absolute",this.addEventListener("removed",function(t){if(null!==this.element.parentNode){this.element.parentNode.removeChild(this.element);for(var e=0,i=this.children.length;i>e;e++)this.children[e].dispatchEvent(t)}})},i.CSS3DObject.prototype=Object.create(i.Object3D.prototype),i.CSS3DSprite=function(t){i.CSS3DObject.call(this,t)},i.CSS3DSprite.prototype=Object.create(i.CSS3DObject.prototype),i.CSS3DRenderer=function(){var t,e,r,n,s=new i.Matrix4,o=document.createElement("div");o.style.overflow="hidden",o.style.WebkitTransformStyle="preserve-3d",o.style.MozTransformStyle="preserve-3d",o.style.oTransformStyle="preserve-3d",o.style.transformStyle="preserve-3d",this.domElement=o;var a=document.createElement("div");a.style.WebkitTransformStyle="preserve-3d",a.style.MozTransformStyle="preserve-3d",a.style.oTransformStyle="preserve-3d",a.style.transformStyle="preserve-3d",o.appendChild(a),this.setClearColor=function(){},this.setSize=function(i,s){t=i,e=s,r=t/2,n=e/2,o.style.width=i+"px",o.style.height=s+"px",a.style.width=i+"px",a.style.height=s+"px"};var c=function(t){return 1e-6>Math.abs(t)?0:t},u=function(){var t=new i.Vector3,e=new i.Vector3,r=new i.Euler,n=new i.Quaternion;return r._quaternion=n,n._euler=r,function(i){return i.decompose(t,n,e),"translate3d(-50%,-50%,0) translate3d("+c(t.x)+"px, "+c(t.y)+"px, "+c(t.z)+"px) rotateX("+c(r.x)+"rad) rotateY("+c(r.y)+"rad) rotateZ("+c(r.z)+"rad) scale3d("+c(e.x)+", "+c(-e.y)+", "+c(e.z)+")"
}}(),h=function(t,e){if(t instanceof i.CSS3DObject){var r;t instanceof i.CSS3DSprite?(s.copy(e.matrixWorldInverse),s.transpose(),s.copyPosition(t.matrixWorld),s.scale(t.scale),s.elements[3]=0,s.elements[7]=0,s.elements[11]=0,s.elements[15]=1,r=u(s)):r=u(t.matrixWorld);var n=t.element;n.style.WebkitTransformStyle="preserve-3d",n.style.MozTransformStyle="preserve-3d",n.style.oTransformStyle="preserve-3d",n.style.transformStyle="preserve-3d",n.style.WebkitTransform=r,n.style.MozTransform=r,n.style.oTransform=r,n.style.transform=r,n.parentNode!==a&&a.appendChild(n)}for(r=0,n=t.children.length;n>r;r++)h(t.children[r],e)};this.render=function(t,s){var u=.5/Math.tan(i.Math.degToRad(.5*s.fov))*e;o.style.WebkitPerspective=u+"px",o.style.MozPerspective=u+"px",o.style.oPerspective=u+"px",o.style.perspective=u+"px",t.updateMatrixWorld(),void 0===s.parent&&s.updateMatrixWorld(),s.matrixWorldInverse.getInverse(s.matrixWorld);var l,u="translate3d(0,0,"+u+"px)";l=s.matrixWorldInverse.elements,l="matrix3d("+c(l[0])+","+c(-l[1])+","+c(l[2])+","+c(l[3])+","+c(l[4])+","+c(-l[5])+","+c(l[6])+","+c(l[7])+","+c(l[8])+","+c(-l[9])+","+c(l[10])+","+c(l[11])+","+c(l[12])+","+c(-l[13])+","+c(l[14])+","+c(l[15])+")",u=u+l+" translate3d("+r+"px,"+n+"px, 0)",a.style.WebkitTransform=u,a.style.MozTransform=u,a.style.oTransform=u,a.style.transform=u,h(t,s)}};var r={isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},cascade:function(){var t,e=Array.prototype.slice.call(arguments);for(t=0;t<e.length;t++)if(void 0!==e[t])return e[t];return!1},hexToRgb:function(t){return t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,r){return e+e+i+i+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}};t.extend(Number.prototype,{absolute:function(){return Math.abs(this)},add:function(){var t=this;return Array.prototype.slice.call(arguments).forEach(function(e){t+=e}),t},arcCosine:function(){return Math.acos(this)},arcSine:function(){return Math.asin(this)},arcTangent:function(){return Math.atan(this)},constrain:function(t,e){var i,r,n=this;return e=e||0,i=Math.max(t,e),r=Math.min(t,e),n=Math.min(n,i),n=Math.max(n,r)},cosine:function(){return Math.cos(this)},degreesToDirection:function(){var t="N NNE NE NEE E SEE SE SSE S SSW SW SWW W NWW NW NNW N".split(" ");return t[this.scale(0,360,0,t.length-1).round()]},degreesToRadians:function(){return this*Math.PI/180},divide:function(){var t=this;return Array.prototype.slice.call(arguments).forEach(function(e){t/=e}),t},isBetween:function(t,e){var i=Math.min(t,e),r=Math.max(t,e);return this>=i&&r>=this},lerp:function(t,e){return t+(e-t)*this},log:function(t){return Math.log(this)/(void 0===t?1:Math.log(t))},log10:function(){return Math.log(this)/Math.LN10},maximum:function(t){return Math.max(this,t)},minimum:function(t){return Math.min(this,t)},modulo:function(t){return(this%t+t)%t},multiply:function(){var t=this;return Array.prototype.slice.call(arguments).forEach(function(e){t*=e}),t},normalize:function(t,e){return t==e?1:(this-t)/(e-t)},raiseTo:function(t){return Math.pow(this,t)},radiansToDegrees:function(){return 180*this/Math.PI},rand:function(t){var e;return void 0!==t?(e=Math.min(this,t),t=Math.max(this,t),e+Math.floor(Math.random()*(t-e))):Math.floor(Math.random()*this)},random:function(t){var e;return void 0!==t?(e=Math.min(this,t),t=Math.max(this,t),e+Math.random()*(t-e)):Math.random()*this},remainder:function(t){return this%t},round:function(t){var e;return t=t||0,e=this*Math.pow(10,t),e=Math.round(e),e/=Math.pow(10,t)},roundDown:function(){return Math.floor(this)},roundUp:function(){return Math.ceil(this)},scale:function(t,e,i,r){return t=this.normalize(t,e),i==r?r:i+t*(r-i)},sine:function(){return Math.sin(this)},subtract:function(){var t=this;return Array.prototype.slice.call(arguments).forEach(function(e){t-=e}),t},tangent:function(){return Math.tan(this)},toArray:function(){return[this.valueOf()]},toNumber:function(){return this.valueOf()},toPaddedString:function(t){return("0000000000000"+String(this)).slice(-t)},toSignedString:function(){var t=""+this;return this>=0&&(t="+"+t),t},toString:function(){return""+this}}),t.extend(String.prototype,{capitalize:function(){return this.charAt(0).toUpperCase()+this.slice(1)},invert:function(){var t,e="";for(t=0;t<this.length;t++)e=this.charAt(t)===this.charAt(t).toUpperCase()?e+this.charAt(t).toLowerCase():e+this.charAt(t).toUpperCase();return e},justifyCenter:function(t){var e=Math.round(this.length/2),i=this.length-e,r=Math.round(t/2),e=r-e;if(t=t-r-i,i=this,e>0)for(;e--;)i=" "+i;else 0>e&&(i=i.substr(-1*e));if(t>0)for(;t--;)i+=" ";else 0>t&&(i=i.substr(0,i.length+t));return i},justifyLeft:function(t){for(var e=this;e.length<t;)e+=" ";return e},justifyRight:function(t){for(var e=this;e.length<t;)e=" "+e;return e},multiply:function(t){var e,i="";for(t=r.cascade(t,2),e=0;t>e;e++)i+=this;return i},reverse:function(){var t,e="";for(t=0;t<this.length;t++)e=this[t]+e;return e},size:function(){return this.length},toEntities:function(){var t,e="";for(t=0;t<this.length;t++)e+="&#"+this.charCodeAt(t)+";";return e},toCamelCase:function(){var t,e=this.split(/\W+|_+/),i=e[0];for(t=1;t<e.length;t++)i+=e[t].capitalize();return i},directionToDegrees:function(){var t="N NNE NE NEE E SEE SE SSE S SSW SW SWW W NWW NW NNW N".split(" "),e=t.indexOf(this.toUpperCase());return e>=0?e.scale(0,t.length-1,0,360):Number.NaN},toArray:function(){return[this]},toNumber:function(){return parseFloat(this)},toString:function(){return this},toUnderscoreCase:function(){var t=this.replace(/[A-Z]+/g,function(t){return"_"+t});return"_"===t.charAt(0)&&(t=t.substr(1)),t.toLowerCase()},toUnicode:function(){var t,e,i="";for(t=0;t<this.length;t++){for(e=this.charCodeAt(t).toString(16).toUpperCase();4>e.length;)e="0"+e;i+="\\u"+e}return i}}),t.extend(Array.prototype,{distanceTo:function(t){var e,i=0;if(0<arguments.length&&(t=Array.prototype.slice.call(arguments)),this.length===t.length){for(e=0;e<this.length;e++)i+=Math.pow(t[e]-this[e],2);return Math.pow(i,.5)}return null},first:function(){return this[0]},last:function(){return this[this.length-1]},maximum:function(){return Math.max.apply(null,this)},middle:function(){return this[Math.round((this.length-1)/2)]},minimum:function(){return Math.min.apply(null,this)},rand:function(){return this[Math.floor(Math.random()*this.length)]},random:function(){return this[Math.floor(Math.random()*this.length)]},shuffle:function(){var t,e,i,r=this.length;if(0==r)return!1;for(;--r;)t=Math.floor(Math.random()*(r+1)),e=this[r],i=this[t],this[r]=i,this[t]=e;return this},toArray:function(){return this},toHtml:function(){var t,e="<ul>";for(t=0;t<this.length;t++)e=this[t]instanceof Array?e+this[t].toHtml():e+("<li>"+this[t]+"</li>");return e+"</ul>"},toText:function(t){var e,i,n;for(t=r.cascade(t,0),i="\n"+"	".multiply(t),n="",e=0;e<this.length;e++)n=this[e]instanceof Array?n+(i+this[e].toText(t+1)):n+(i+this[e]);return n}}),t.Color=function(t,e,i,r,n){this.name=t,this.initial=e,this.hex=i,this.styleF=r,this.styleB=n};var n,s,o,a,c,u;n=t.WHITE=new t.Color("white","W","#FFF","font-weight: bold; color: #888","background-color: #F3F3F3; color: rgba( 0, 0, 0, 0.5 )"),s=t.ORANGE=new t.Color("orange","O","#F60","font-weight: bold; color: #F60","background-color: #F60; color: rgba( 255, 255, 255, 0.9 )"),o=t.BLUE=new t.Color("blue","B","#00D","font-weight: bold; color: #00D","background-color: #00D; color: rgba( 255, 255, 255, 0.9 )"),a=t.RED=new t.Color("red","R","#F00","font-weight: bold; color: #F00","background-color: #F00; color: rgba( 255, 255, 255, 0.9 )"),c=t.GREEN=new t.Color("green","G","#0A0","font-weight: bold; color: #0A0","background-color: #0A0; color: rgba( 255, 255, 255, 0.9 )"),u=t.YELLOW=new t.Color("yellow","Y","#FE0","font-weight: bold; color: #ED0","background-color: #FE0; color: rgba( 0, 0, 0, 0.5 )"),t.COLORLESS=new t.Color("NA","X","#DDD","color: #EEE","color: #DDD"),t.Direction=function(t,e,i){this.id=t,this.name=e.toLowerCase(),this.normal=i,this.initial=e.substr(0,1).toUpperCase(),this.neighbors=[],this.opposite=null},t.Direction.prototype.setRelationships=function(t,e,i,r,n){this.neighbors=[t,e,i,r],this.opposite=n},t.Direction.getNameById=function(t){return"front up right down left back".split(" ")[t]},t.Direction.getIdByName=function(t){return{front:0,up:1,right:2,down:3,left:4,back:5}[t]},t.Direction.getDirectionById=function(e){return[t.Direction.FRONT,t.Direction.UP,t.Direction.RIGHT,t.Direction.DOWN,t.Direction.LEFT,t.Direction.BACK][e]},t.Direction.getDirectionByInitial=function(e){return{F:t.Direction.FRONT,U:t.Direction.UP,R:t.Direction.RIGHT,D:t.Direction.DOWN,L:t.Direction.LEFT,B:t.Direction.BACK}[e.toUpperCase()]},t.Direction.getDirectionByName=function(e){return{front:t.Direction.FRONT,up:t.Direction.UP,right:t.Direction.RIGHT,down:t.Direction.DOWN,left:t.Direction.LEFT,back:t.Direction.BACK}[e.toLowerCase()]},t.Direction.getDirectionByNormal=function(){var e=new i.Vector3;return function(i){return e.x=Math.round(i.x),e.y=Math.round(i.y),e.z=Math.round(i.z),e.equals(t.Direction.FRONT.normal)?t.Direction.FRONT:e.equals(t.Direction.BACK.normal)?t.Direction.BACK:e.equals(t.Direction.UP.normal)?t.Direction.UP:e.equals(t.Direction.DOWN.normal)?t.Direction.DOWN:e.equals(t.Direction.LEFT.normal)?t.Direction.LEFT:e.equals(t.Direction.RIGHT.normal)?t.Direction.RIGHT:null}}(),t.Direction.prototype.getRotation=function(t,e,i){if(void 0===e&&(e=this.neighbors[0]),e===this||e===this.opposite)return null;i=void 0===i?1:i.modulo(4);for(var r=0;5>r&&this.neighbors[r]!==e;r++);return this.neighbors[r.add(i*t).modulo(4)]},t.Direction.prototype.getClockwise=function(t,e){return this.getRotation(1,t,e)},t.Direction.prototype.getAnticlockwise=function(t,e){return this.getRotation(-1,t,e)},t.Direction.prototype.getDirection=function(t,e){return this.getRotation(1,e,t.id-1)},t.Direction.prototype.getUp=function(e){return this.getDirection(t.Direction.UP,e)},t.Direction.prototype.getRight=function(e){return this.getDirection(t.Direction.RIGHT,e)},t.Direction.prototype.getDown=function(e){return this.getDirection(t.Direction.DOWN,e)},t.Direction.prototype.getLeft=function(e){return this.getDirection(t.Direction.LEFT,e)},t.Direction.prototype.getOpposite=function(){return this.opposite},t.Direction.FRONT=new t.Direction(0,"front",new i.Vector3(0,0,1)),t.Direction.UP=new t.Direction(1,"up",new i.Vector3(0,1,0)),t.Direction.RIGHT=new t.Direction(2,"right",new i.Vector3(1,0,0)),t.Direction.DOWN=new t.Direction(3,"down",new i.Vector3(0,-1,0)),t.Direction.LEFT=new t.Direction(4,"left",new i.Vector3(-1,0,0)),t.Direction.BACK=new t.Direction(5,"back",new i.Vector3(0,0,-1)),t.Direction.FRONT.setRelationships(t.Direction.UP,t.Direction.RIGHT,t.Direction.DOWN,t.Direction.LEFT,t.Direction.BACK),t.Direction.UP.setRelationships(t.Direction.BACK,t.Direction.RIGHT,t.Direction.FRONT,t.Direction.LEFT,t.Direction.DOWN),t.Direction.RIGHT.setRelationships(t.Direction.UP,t.Direction.BACK,t.Direction.DOWN,t.Direction.FRONT,t.Direction.LEFT),t.Direction.DOWN.setRelationships(t.Direction.FRONT,t.Direction.RIGHT,t.Direction.BACK,t.Direction.LEFT,t.Direction.UP),t.Direction.LEFT.setRelationships(t.Direction.UP,t.Direction.FRONT,t.Direction.DOWN,t.Direction.BACK,t.Direction.RIGHT),t.Direction.BACK.setRelationships(t.Direction.UP,t.Direction.LEFT,t.Direction.DOWN,t.Direction.RIGHT,t.Direction.FRONT),t.Queue=function(t){void 0!==t&&t instanceof Function&&(this.validate=t),this.history=[],this.useHistory=!0,this.future=[],this.isReady=!0,this.isLooping=!1},t.Queue.prototype.add=function(){var t=Array.prototype.slice.call(arguments);return void 0!==this.validate&&this.validate instanceof Function&&(t=this.validate(t)),t instanceof Array&&t.forEach(function(t){this.future.push(t)}.bind(this)),this.future},t.Queue.prototype.remove=function(){var t=Array.prototype.slice.call(arguments);return t instanceof Array&&t.forEach(function(t){this.future=this.future.filter(function(e){return e!=t})}.bind(this)),this.future},t.Queue.prototype.purge=function(){var t=Array.prototype.slice.call(arguments);return t instanceof Array&&t.forEach(function(t){this.history=this.history.filter(function(e){return e!=t})}.bind(this)),this.history},t.Queue.prototype.empty=function(t){this.future=[],t&&(this.history=[])},t.Queue.prototype.do=function(){if(this.future.length){var t=this.future.shift();return this.useHistory&&this.history.push(t),t}this.isLooping&&(this.future=this.history.slice(),this.history=[])},t.Queue.prototype.undo=function(){if(this.history.length){var t=this.history.pop();return this.future.unshift(t),t}},t.Queue.prototype.redo=function(){return this.do()},t.Twist=function(t,e){t&&this.set(t,e)},t.Twist.prototype.set=function(e,i){var r={X:"Cube on X",L:"Left face",M:"Middle slice",R:"Right face",Y:"Cube on Y",U:"Up face",E:"Equator slice",D:"Down face",Z:"Cube on Z",F:"Front face",S:"Standing slice",B:"Back face"}[e.toUpperCase()];if(void 0===r)return!1;void 0!=i&&0>i&&(e=e.invert(),i=i.absolute());var n=0,s="unwise";e===e.toUpperCase()?(n=1,s="clockwise"):e===e.toLowerCase()&&(n=-1,s="anticlockwise"),this.command=e,this.group=r,this.degrees=i,this.vector=n,this.wise=s,this.isShuffle=!1,this.getInverse=function(){return new t.Twist(e.invert(),i)}},t.Twist.prototype.equals=function(t){return this.command===t.command&&this.degrees===t.degrees},t.Twist.prototype.copy=function(t){return this.command=t.command,this.group=t.group,this.degrees=t.degrees,this.vector=t.vector,this.wise=t.wise,this.isShuffle=t.isShuffle,this},t.Twist.validate=function(){var e,i,n,s,o,a,c=Array.prototype.slice.call(arguments);for(i=0;i<c.length;i++)if(e=c[i],n=i+1<c.length?c[i+1]:void 0,!(e instanceof t.Twist))if("string"==typeof e){if(1===e.length)c[i]="number"==typeof n?new t.Twist(e,n):new t.Twist(e);else if(1<e.length){for(n=/(-?\d+|[XLMRYUEDZFSB])/gi,e=e.match(n),o=0;o<e.length;o++)s=e[o],r.isNumeric(s)?e[o]=+s:(n=e.slice(0,o),a=e.slice(o+1),s=s.split(""),e=n.concat(s,a));n=c.slice(0,i),a=c.slice(i+1),c=n.concat(e,a),i--}}else e instanceof t.Direction?c[i]=e.initial:e instanceof Array?(n=c.slice(0,i),a=c.slice(i+1),c=n.concat(e,a)):c.splice(i,1),i--;return c},t.Cubelet=function(e,r,o){i.Object3D.call(this),this.cube=e,this.id=r||0,this.setAddress(this.id),this.size=e.cubeletSize||140,e=this.addressX*(this.size+.1),r=this.addressY*(this.size+.1);var a=this.addressZ*(this.size+.1);for(this.position.set(e,r,a),this.matrixSlice=(new i.Matrix4).makeTranslation(e,r,a),this.updateMatrix(),this.cube.object3D.add(this),e=0,void 0===o&&(o=[n,s,,,c]),this.faces=[],r=0;6>r;r++)a=o[r]||t.COLORLESS,this.faces[r]={},this.faces[r].id=r,this.faces[r].color=a,this.faces[r].normal=t.Direction.getNameById(r),this.faces[r].isIntrovert=a===t.COLORLESS,a!==t.COLORLESS&&e++;this.type=["core","center","edge","corner"][e],this.front=this.faces[0],this.up=this.faces[1],this.right=this.faces[2],this.down=this.faces[3],this.left=this.faces[4],this.back=this.faces[5],this.colors=(this.faces[0].color?this.faces[0].color.initial:"-")+(this.faces[1].color?this.faces[1].color.initial:"-")+(this.faces[2].color?this.faces[2].color.initial:"-")+(this.faces[3].color?this.faces[3].color.initial:"-")+(this.faces[4].color?this.faces[4].color.initial:"-")+(this.faces[5].color?this.faces[5].color.initial:"-"),this.isStickerCubelet=this.front.color&&"white"===this.front.color.name&&"center"===this.type,this.isTweening=!0,this.isTweening=this.isEngagedZ=this.isEngagedY=this.isEngagedX=!1,this.opacity=1,this.radius=0},t.Cubelet.prototype=Object.create(i.Object3D.prototype),t.extend(t.Cubelet.prototype,{setAddress:function(t){this.address=t||0,this.addressX=t.modulo(3).subtract(1),this.addressY=-1*t.modulo(9).divide(3).roundDown().subtract(1),this.addressZ=-1*t.divide(9).roundDown().subtract(1)},hasColor:function(t){var e,i,n=r.hexToRgb(t.hex);for(t=0;6>t;t++)if(i=r.hexToRgb(this.faces[t].color.hex),i.r===n.r&&i.g===n.g&&i.b===n.b){e=t;break}return void 0!==e?"front up right down left back".split(" ")[e]:!1},hasColors:function(){var t=this,e=!0;return Array.prototype.slice.call(arguments).forEach(function(i){e=e&&!!t.hasColor(i)}),e},getRadius:function(){return this.radius},setRadius:function(t,i){if(!1===this.isTweening&&(t=t||0,void 0===this.radius&&(this.radius=0),this.radius!==t)){this.isTweening=!0;var r=(this.radius-t).absolute(),n={radius:this.radius};new e.Tween(n).to({radius:t},r).easing(e.Easing.Quartic.Out).onUpdate(function(){this.position.set(this.addressX.multiply(this.size+n.radius)+.2,this.addressY.multiply(this.size+n.radius)+.2,this.addressZ.multiply(this.size+n.radius)+.2),this.updateMatrix(),this.matrixSlice.copy(this.matrix),this.radius=n.radius}.bind(this)).onComplete(function(){this.isTweening=!1,this.position.set(this.addressX.multiply(this.size+n.radius)+.2,this.addressY.multiply(this.size+n.radius)+.2,this.addressZ.multiply(this.size+n.radius)+.2),this.updateMatrix(),this.matrixSlice.copy(this.matrix),this.radius=n.radius,i instanceof Function&&i()}.bind(this)).start(this.cube.time)}}}),t.Group=function(){this.cubelets=[],this.add(Array.prototype.slice.call(arguments))},t.extend(t.Group.prototype,i.EventDispatcher.prototype),t.extend(t.Group.prototype,{add:function(){var e=this;return Array.prototype.slice.call(arguments).forEach(function(i){i instanceof t.Group&&(i=i.cubelets),i instanceof Array?e.add.apply(e,i):e.cubelets.push(i)}),this},remove:function(e){if(e instanceof t.Group&&(e=e.cubelets),e instanceof Array){var i=this;e.forEach(function(t){i.remove(t)})}for(var r=this.cubelets.length;0<r--;)this.cubelets[r]===e&&this.cubelets.splice(r,1);return this},isFlagged:function(t){var e=0;return this.cubelets.forEach(function(i){e+=i[t]?1:0}),e},isTweening:function(){return this.isFlagged("isTweening")},isEngagedX:function(){return this.isFlagged("isEngagedX")},isEngagedY:function(){return this.isFlagged("isEngagedY")},isEngagedZ:function(){return this.isFlagged("isEngagedZ")},isEngaged:function(){return this.isEngagedX()+this.isEngagedY()+this.isEngagedZ()},hasProperty:function(e,i){var r=new t.Group;return this.cubelets.forEach(function(t){t[e]===i&&r.add(t)}),r},hasId:function(t){return this.hasProperty("id",t)},hasAddress:function(t){return this.hasProperty("address",t)},hasType:function(t){return this.hasProperty("type",t)},hasColor:function(e){var i=new t.Group;return this.cubelets.forEach(function(t){t.hasColor(e)&&i.add(t)}),i},hasColors:function(){var e=new t.Group,i=Array.prototype.slice.call(arguments);return this.cubelets.forEach(function(t){t.hasColors.apply(t,i)&&e.add(t)}),e},isSolved:function(e){if(e){var i={},r=0;return e instanceof t.Direction&&(e=e.name),this.cubelets.forEach(function(t){t=t[e].color.name,void 0===i[t]?(i[t]=1,r++):i[t]++}),1===r?!0:!1}return console.warn("A face [String or ERNO.Controls] argument must be specified when using ERNO.Group.isSolved()."),!1},show:function(){return this.cubelets.forEach(function(t){t.show()}),this},hide:function(){return this.cubelets.forEach(function(t){t.hide()}),this},showPlastics:function(){return this.cubelets.forEach(function(t){t.showPlastics()}),this},hidePlastics:function(){return this.cubelets.forEach(function(t){t.hidePlastics()}),this},showExtroverts:function(){return this.cubelets.forEach(function(t){t.showExtroverts()}),this},hideExtroverts:function(){return this.cubelets.forEach(function(t){t.hideExtroverts()}),this},showIntroverts:function(t,e){return this.cubelets.forEach(function(i){i.showIntroverts(t,e)}),this},hideIntroverts:function(t,e){return this.cubelets.forEach(function(i){i.hideIntroverts(t,e)}),this},showStickers:function(){return this.cubelets.forEach(function(t){t.showStickers()}),this},hideStickers:function(){return this.cubelets.forEach(function(t){t.hideStickers()}),this},showWireframes:function(){return this.cubelets.forEach(function(t){t.showWireframes()}),this},hideWireframes:function(){return this.cubelets.forEach(function(t){t.hideWireframes()}),this},showIds:function(){return this.cubelets.forEach(function(t){t.showIds()}),this},hideIds:function(){return this.cubelets.forEach(function(t){t.hideIds()}),this},showTexts:function(){return this.cubelets.forEach(function(t){t.showTexts()}),this},hideTexts:function(){return this.cubelets.forEach(function(t){t.hideTexts()}),this},getOpacity:function(){var t=0;return this.cubelets.forEach(function(e){t+=e.getOpacity()}),t/this.cubelets.length},setOpacity:function(t,e){return this.cubelets.forEach(function(i){i.setOpacity(t,e)}),this},getRadius:function(){var t=0;return this.cubelets.forEach(function(e){t+=e.getRadius()}),t/this.cubelets.length},setRadius:function(t,e){return this.cubelets.forEach(function(i){i.setRadius(t,e)}),this}}),t.Slice=function(e,r){this.axis=new i.Vector3,this.invertedAxis=new i.Vector3,this.matrix=new i.Matrix4,this.axis.rotation=0,this.indices=e,this.neighbour=null,this.ableToHideInternalFaces=!0,this.cube=r,this.getCubelet=function(t){return r.cubelets[e[t]]},this.rotateGroupMappingOnAxis=function(){var n,s=new i.Vector3,o=new i.Vector3(1,1,1),a=new i.Vector3,c=new i.Vector3,u=new i.Matrix4;return function(i){i=Math.round(i/(.25*Math.PI))*Math.PI*.25,s.copy(o),s.sub(this.axis);var h=r.cubelets.slice();u.makeRotationAxis(this.axis,-1*i);for(var l,d=e.length;0<d--;)l=r.cubelets[e[d]],a.set(l.addressX,l.addressY,l.addressZ),c.copy(a),a.multiply(s).applyMatrix4(u),a.x=Math.round(a.x),a.y=Math.round(a.y),a.z=Math.round(a.z),a.add(c.multiply(this.axis)),a.add(o),a.y=2-a.y,a.z=2-a.z,r.cubelets[l.address]=h[9*a.z+3*a.y+a.x];for(d=0;d<r.cubelets.length;d++)r.cubelets[d].setAddress(d);u.makeRotationAxis(this.axis,i),this.cubelets.forEach(function(e){n=[],e.faces.forEach(function(e){a.copy(t.Direction.getDirectionByName(e.normal).normal),a.applyMatrix4(u),n[t.Direction.getDirectionByNormal(a).id]=e,e.normal=t.Direction.getDirectionByNormal(a).name}),e.faces=n.slice(),e.front=e.faces[0],e.up=e.faces[1],e.right=e.faces[2],e.down=e.faces[3],e.left=e.faces[4],e.back=e.faces[5]})}}(),this.map()},t.Slice.prototype=Object.create(t.Group.prototype),t.extend(t.Slice.prototype,{get origin(){return this.cube.cubelets[this.indices[4]]},get north(){return this.cube.cubelets[this.indices[1]]},get northEast(){return this.cube.cubelets[this.indices[2]]},get east(){return this.cube.cubelets[this.indices[5]]},get southEast(){return this.cube.cubelets[this.indices[8]]},get south(){return this.cube.cubelets[this.indices[7]]},get southWest(){return this.cube.cubelets[this.indices[6]]},get west(){return this.cube.cubelets[this.indices[3]]},get northWest(){return this.cube.cubelets[this.indices[0]]},get cubelets(){for(var t=[],e=this.indices.length;0<e--;)t.push(this.getCubelet(e));return t},map:function(){for(var e=0;6>e;e++)if(this.origin.faces[e].color&&this.origin.faces[e].color!==t.COLORLESS){this.color=this.origin.faces[e].color,this.face=t.Direction.getNameById(e);break}if(void 0===this.axis||0===this.axis.lengthSq()){var e=this.northEast.position.clone(),r=this.southWest.position.clone(),n=this.northWest.position.clone();this.axis=(new i.Vector3).crossVectors(r.sub(e),n.sub(e)).normalize(),this.axis.rotation=0}return this.up=new t.Group(this.northWest,this.north,this.northEast),this.equator=new t.Group(this.west,this.origin,this.east),this.down=new t.Group(this.southWest,this.south,this.southEast),this.left=new t.Group(this.northWest,this.west,this.southWest),this.middle=new t.Group(this.north,this.origin,this.south),this.right=new t.Group(this.northEast,this.east,this.southEast),(e=this.hasType("center"))&&1===e.cubelets.length?(this.center=this.hasType("center"),this.corners=new t.Group(this.hasType("corner")),this.cross=new t.Group(this.center,this.hasType("edge")),this.ex=new t.Group(this.center,this.hasType("corner"))):this.centers=new t.Group(this.hasType("center")),this.edges=new t.Group(this.hasType("edge")),this.ring=new t.Group(this.northWest,this.north,this.northEast,this.west,this.east,this.southWest,this.south,this.southEast),this.dexter=new t.Group(this.northWest,this.origin,this.southEast),this.sinister=new t.Group(this.northEast,this.origin,this.southWest),this},set rotation(t){if(this.ableToHideInternalFaces&&0!==this.cube.isFlagged("showingIntroverts")&&this.cube.hideInvisibleFaces){var e=0!==t%(.5*Math.PI);this.invertedAxis.copy(this.axis).negate(),e?this.neighbour?(this.showIntroverts(this.axis,!0),this.neighbour.showIntroverts(this.invertedAxis,!0)):(this.cube.showIntroverts(this.axis,!0),this.cube.showIntroverts(this.invertedAxis,!0)):this.neighbour?(this.hideIntroverts(null,!0),this.neighbour.hideIntroverts(null,!0)):this.cube.hideIntroverts(null,!0)}this.matrix.makeRotationAxis(this.axis,t),this.axis.rotation=t,t=this.indices.length;for(var r=new i.Matrix4;t--;)e=this.getCubelet(t),e.matrix.multiplyMatrices(this.matrix,e.matrixSlice),e.position.setFromMatrixPosition(e.matrix),e.scale.setFromMatrixScale(e.matrix),r.extractRotation(e.matrix),e.quaternion.setFromRotationMatrix(r)},get rotation(){return this.axis.rotation},getLocation:function(t){return t===this.origin?"origin":t===this.north?"north":t===this.northEast?"northEast":t===this.east?"east":t===this.southEast?"southEast":t===this.south?"south":t===this.southWest?"southWest":t===this.west?"west":t===this.northWest?"northWest":!1},isSolved:function(e){if(e){var i,r={},n=this.indices.length,s=0;for(e instanceof t.Direction&&(e=e.name);0<n--;)i=this.getCubelet(n),i=i[e].color.name,void 0===r[i]?(r[i]=1,s++):r[i]++;return 1===s?!0:!1}return console.warn("A face [String or ERNO.Controls] argument must be specified when using ERNO.Group.isSolved()."),!1}}),t.Fold=function(t,e){this.map=[t.northWest[t.face].text,t.north[t.face].text,t.northEast[t.face].text,e.northWest[e.face].text,e.north[e.face].text,e.northEast[e.face].text,t.west[t.face].text,t.origin[t.face].text,t.east[t.face].text,e.west[e.face].text,e.origin[e.face].text,e.east[e.face].text,t.southWest[t.face].text,t.south[t.face].text,t.southEast[t.face].text,e.southWest[e.face].text,e.south[e.face].text,e.southEast[e.face].text]},t.Fold.prototype.getText=function(){var t="";return this.map.forEach(function(e){t+=e.innerHTML}),t},t.Fold.prototype.setText=function(t){var e;for(t=t.justifyLeft(18),e=0;18>e;e++)this.map[e].innerHTML=t.substr(e,1)},t.Projector=function(){return function(t,e){function r(t,e){return b.getInverse(e.projectionMatrix),o.multiplyMatrices(e.matrixWorld,b),t.applyProjection(o)}function n(i,n,o){var h=e,d=h!==document?h.getBoundingClientRect():{left:0,top:0,width:window.innerWidth,height:window.innerHeight};return h!==document&&(h=h.ownerDocument.documentElement,d.left+=window.pageXOffset-h.clientLeft,d.top+=window.pageYOffset-h.clientTop),s=d,c.x=(n-s.left)/s.width*2-1,c.y=(o-s.top)/s.height*-2+1,c.z=-1,u.set(c.x,c.y,1),r(c,i),r(u,i),u.sub(c).normalize(),l.set(c,u),a.getInverse(t.matrixWorld),l.applyMatrix4(a),l}var s,o=new i.Matrix4,a=new i.Matrix4,c=new i.Vector3,u=new i.Vector3(1,1,1),h=new i.Vector3,l=new i.Ray,d=new i.Box3,f=new i.Sphere,b=new i.Matrix4,p=c.distanceTo(u);return d.min.set(.5*-t.size,.5*-t.size,.5*-t.size),d.max.set(.5*t.size,.5*t.size,.5*t.size),f.radius=p*t.size*.5,{getIntersection:function(e,r,s,o,a){return o=o||new i.Vector3,null===r||null===s?null:(n(e,r,s),l.isIntersectionSphere(f)&&null!==l.intersectBox(d,o)?(a&&(e=h||new i.Vector3,e.copy(o).set(Math.round(e.x),Math.round(e.y),Math.round(e.z)).multiplyScalar(2/t.size).set(0|e.x,0|e.y,0|e.z),a.setFromNormalAndCoplanarPoint(h,o)),o):null)},getIntersectionOnPlane:function(t,e,i,r,s){return null===e||null===i?null:(n(t,e,i),l.intersectPlane(r,s))},getCubeletAtIntersection:function(){var e=new i.Vector3;return function(i){return e.copy(i).add(d.max).multiplyScalar(3/t.size).set(Math.min(0|e.x,2),Math.min(3-e.y|0,2),Math.min(3-e.z|0,2)),t.cubelets[9*e.z+3*e.y+e.x]}}()}}}(),t.Interaction=function(){return function(e,r,n,s,o){function a(t){D.enabled&&2!==t.button&&(f=(t.touches&&t.touches[0]||t).clientX,b=(t.touches&&t.touches[0]||t).clientY,p.getIntersection(r,f,b,m,x)&&(null!==t.touches&&t.preventDefault(),0===e.isTweening()&&(S="undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),D.active=!0,h=p.getCubeletAtIntersection(m),l=[e.slices[h.addressX+1],e.slices[h.addressY+4],e.slices[h.addressZ+7]],n.addEventListener("mousemove",c),n.addEventListener("touchmove",c),n.addEventListener("mouseup",u),n.addEventListener("touchcancel",u),n.addEventListener("touchend",u),n.removeEventListener("mousedown",a),n.removeEventListener("touchstart",a))))}function c(t){D.active&&(I.x=(t.touches&&t.touches[0]||t).clientX,I.y=(t.touches&&t.touches[0]||t).clientY),D.enabled&&(t.preventDefault(),t.stopImmediatePropagation())}function u(i){var r=(i.touches&&i.touches[0]||i).clientX,s=(i.touches&&i.touches[0]||i).clientY;D.active=!1,D.enabled&&(r!==b||s!==b)&&y&&(null!==i.touches&&i.preventDefault(),i=d.name[0].toUpperCase(),r=Math.round(M/Math.PI*2)*Math.PI*.5,.3<w.length()/(("undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now())-S)&&(r=Math.floor(M/Math.PI*2)*Math.PI*.5,r+=0<v.dot(w.normalize())?.5*Math.PI:0),e.twist(new t.Twist(i,r.radiansToDegrees()))),S=0,I.x=void 0,I.y=void 0,y=!1,d=null,n.removeEventListener("mousemove",c),n.removeEventListener("touchmove",c),n.removeEventListener("mouseup",u),n.removeEventListener("touchend",u),n.removeEventListener("touchcancel",u),n.addEventListener("mousedown",a),n.addEventListener("touchstart",a)}var h,l,d,f,b,p=new t.Projector(e,n),m=new i.Vector3,g=new i.Vector3,y=!1,x=new i.Plane,w=new i.Vector3,v=new i.Vector3,I=new i.Vector2;new i.Vector3;var E=new i.Vector3,M=0,S=0;I.x=void 0,I.y=void 0;var D={active:!1,enabled:!0,multiDrag:o||!1,multiDragSnapArea:100,dragSpeed:s||1.3};i.EventDispatcher.prototype.apply(D),D.getIntersectionAt=function(){var t=new i.Vector3,e=new i.Plane;return function(i,n){return null===p.getIntersection(r,i,n,t,e)?null:{cubelet:p.getCubeletAtIntersection(t),face:1===e.normal.x?"RIGHT":-1===e.normal.x?"LEFT":1===e.normal.y?"UP":-1===e.normal.y?"DOWN":1===e.normal.z?"FRONT":"BACK"}}}(),D.update=function(){var t=I.x,i=I.y;D.enabled&&D.active&&void 0!==t&&void 0!=i&&(f!==t||b!==i)&&(p.getIntersectionOnPlane(r,t,i,x,g),w.subVectors(g,m),!y&&5<w.length()&&(d&&(d.rotation=0),y=!0,E.crossVectors(x.normal,w),t=Math.max(Math.abs(E.x),Math.abs(E.y),Math.abs(E.z)),E.x=E.x/t|0,E.y=1===E.x?0:E.y/t|0,E.z=1===E.x||1===E.y?0:E.z/t|0,d=l[Math.abs(3*E.z+2*E.y+E.x)-1],v.crossVectors(d.axis,x.normal).normalize()),y&&(w.subVectors(g,m),M=v.dot(w)/e.size*D.dragSpeed),d&&(d.rotation=M))},n.addEventListener("mousedown",a),n.addEventListener("touchstart",a);var k,_,z=function(t,e){var i=this.getIntersectionAt(t,e);return i?(this.dispatchEvent(new CustomEvent("click",{detail:i})),!0):!1}.bind(D);return n.addEventListener("mousedown",function(t){k=t.clientX,_=t.clientY}),n.addEventListener("mouseup",function(t){var e=t.clientX;t=t.clientY,!y&&Math.abs(Math.sqrt((e-k)*(e-k)+(t-_)*(t-_)))<10*(window.devicePixelratio||1)&&z(k,_)}),n.addEventListener("touchstart",function(t){k=t.touches[0].clientX,_=t.touches[0].clientY}),n.addEventListener("touchend",function(t){var e=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY;!y&&Math.abs(Math.sqrt((e-k)*(e-k)+(i-_)*(i-_)))<10*(window.devicePixelratio||1)&&z(k,_)&&t.preventDefault()}),D}}(),t.Controls=function(){var e,r;return e=0,r=1,function(n,s,o){function a(t){y.enabled&&1===t.which&&null===g.getIntersection(s,t.pageX,t.pageY)&&(f=e,b.multiplyScalar(0),x(t.pageX,t.pageY,p),m.copy(p),y.domElement.removeEventListener("mousedown",a),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u))}function c(t){y.enabled&&(t.preventDefault(),f=e,x(t.pageX,t.pageY,p),b.subVectors(p,m),m.copy(p))}function u(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u),y.domElement.addEventListener("mousedown",a),y.enabled&&(f=r)
}function h(t){y.enabled&&null===g.getIntersection(s,t.touches[0].pageX,t.touches[0].pageY)&&(f=e,b.multiplyScalar(0),x(t.touches[0].pageX,t.touches[0].pageY,p),m.copy(p),y.domElement.removeEventListener("touchstart",h),document.addEventListener("touchend",d),document.addEventListener("touchmove",l))}function l(t){y.enabled&&(f=e,x(t.changedTouches[0].pageX,t.changedTouches[0].pageY,p),b.subVectors(p,m),m.copy(p))}function d(){document.removeEventListener("touchend",d),document.removeEventListener("touchmove",l),y.domElement.addEventListener("touchstart",h),y.enabled&&(f=r)}var f=-1,b=new i.Vector2,p=new i.Vector2;new i.Vector2;var m=new i.Vector2,g=new t.Projector(n,o),y={enabled:!0,domElement:o,rotationSpeed:4,damping:.25},x=function(t,e,i){var r;r=y.domElement,r=r!==document?r.getBoundingClientRect():{left:0,top:0,width:window.innerWidth,height:window.innerHeight};var n=window.devicePixelRatio||1;return i.set(.001*(t*n-r.width-r.left),.001*(r.height+r.top-e*n))};return y.update=function(){var t=new i.Vector3,o=0,a=new i.Matrix4;return function(){!1!==y.enabled&&-1!==f&&(t.set(b.y,-1*b.x,0).normalize(),a.getInverse(n.matrixWorld),a.multiply(s.matrixWorld),t.transformDirection(a),b.multiplyScalar(1-Math.max(0,Math.min(1,y.damping))),o=b.length(),n.object3D.rotateOnAxis(t,-o*y.rotationSpeed),f===e?f=-1:f===r&&o>=1e-4?p.add(b):f=-1)}}(),y.domElement.addEventListener("mousedown",a),y.domElement.addEventListener("touchstart",h),y}}();var h=i.Scene;i.Scene=h||function(){},t.renderers=t.renderers||{},t.renderers.CSS3D=function(e,r){function n(t){t.style.display="block"}function s(t){t.style.display="none"}function o(){return Array.prototype.slice.call(c.domElement.querySelectorAll(".faceLabel"))}function a(){if(r.domElement.parentNode){var t=r.domElement.parentNode.clientWidth,e=r.domElement.parentNode.clientHeight;!r.domElement.parentNode||r.domElement.clientWidth===t&&r.domElement.clientHeight===e||r.setSize(t,e),c.render(u,r.camera)}requestAnimationFrame(a)}var c=new i.CSS3DRenderer,u=new i.Object3D;c.scene=u,u.add(r.autoRotateObj3D),u.add(r.camera);var l;return new i.Vector3,r.faces.forEach(function(t){l=r[t.face].label=new i.CSS3DObject(document.createElement("div")),l.element.classList.add("faceLabel"),l.position.copy(t.axis).multiplyScalar(r.size),l.position.negate(),l.element.innerHTML=t.face.toUpperCase(),r.object3D.add(l)}),r.right.label.rotation.y=.5*Math.PI,r.left.label.rotation.y=-.5*Math.PI,r.back.label.rotation.y=Math.PI,r.up.label.rotation.x=-.5*Math.PI,r.down.label.rotation.x=.5*Math.PI,r.showFaceLabels=function(){return o().forEach(n),this.showingFaceLabels=!0,this},r.hideFaceLabels=function(){return o().forEach(s),this.showingFaceLabels=!1,this},t.extend(t.Cubelet.prototype,t.renderers.CSS3DCubelet.methods),e.forEach(t.renderers.CSS3DCubelet),requestAnimationFrame(a),h&&(i.Scene=h),c},t.renderers.CSS3DCubelet=function(){return function(e){var r=document.createElement("div");r.classList.add("cubelet"),r.classList.add("cubeletId-"+e.id),e.css3DObject=new i.CSS3DObject(r),e.css3DObject.name="css3DObject-"+e.id,e.add(e.css3DObject);var r=e.size/2,n=["rotateX(   0deg ) translateZ( "+r+"px ) rotateZ(   0deg )","rotateX(  90deg ) translateZ( "+r+"px ) rotateZ(   0deg )","rotateY(  90deg ) translateZ( "+r+"px ) rotateZ(   0deg )","rotateX( -90deg ) translateZ( "+r+"px ) rotateZ(  90deg )","rotateY( -90deg ) translateZ( "+r+"px ) rotateZ( -90deg )","rotateY( 180deg ) translateZ( "+r+"px ) rotateZ( -90deg )"],s="axisZ axisY axisX axisY axisX axisZ".split(" ");e.faces.forEach(function(i){i.element=document.createElement("div"),i.element.classList.add("face"),i.element.classList.add(s[i.id]),i.element.classList.add("face"+t.Direction.getNameById(i.id).capitalize()),e.css3DObject.element.appendChild(i.element);var r=document.createElement("div");r.classList.add("wireframe"),i.element.appendChild(r),r=document.createElement("div"),r.classList.add("id"),i.element.appendChild(r);var o=document.createElement("span");o.classList.add("underline"),o.innerText=e.id,r.appendChild(o),r=i.element.style,r.OTransform=r.MozTransform=r.WebkitTransform=r.transform=n[i.id],i.isIntrovert?(i.element.classList.add("faceIntroverted"),i.element.appendChild(document.createElement("div"))):(i.element.classList.add("faceExtroverted"),r=document.createElement("div"),r.classList.add("sticker"),r.classList.add(i.color.name),i.element.appendChild(r),e.isStickerCubelet&&r.classList.add("stickerLogo"),r=document.createElement("div"),r.classList.add("text"),r.innerText=i.id,i.text=r,i.element.appendChild(r))}),e.show(),e.showIntroverts(),e.showPlastics(),e.showStickers(),e.hideIds(),e.hideTexts(),e.hideWireframes()}}(),t.renderers.CSS3DCubelet.methods=function(){function t(t){t.style.display="block"}function r(t){t.style.display="none"}return{getFaceElements:function(t){return Array.prototype.slice.call(this.css3DObject.element.querySelectorAll(".face"+(t||"")))},show:function(){t(this.css3DObject.element),this.showing=!0},hide:function(){r(this.css3DObject.element),this.showing=!1},showExtroverts:function(){this.getFaceElements(".faceExtroverted").forEach(t),this.showingExtroverts=!0},hideExtroverts:function(){this.getFaceElements(".faceExtroverted").forEach(r),this.showingExtroverts=!1},showIntroverts:function(){var e,r=new i.Vector3,n=new i.Matrix4;return function(i,s){e="",i&&(n.getInverse(this.matrix),r.copy(i).transformDirection(n),e=1===Math.abs(Math.round(r.x))?".axisX":1===Math.round(Math.abs(r.y))?".axisY":".axisZ"),this.getFaceElements(".faceIntroverted"+(void 0!==i?e:"")).forEach(t),s||(this.showingIntroverts=!0)}}(),hideIntroverts:function(){var t,e=new i.Vector3,n=new i.Matrix4;return function(i,s){t="",i&&(n.getInverse(this.matrix),e.copy(i).transformDirection(n),t=1===Math.abs(Math.round(e.x))?".axisX":1===Math.round(Math.abs(e.y))?".axisY":".axisZ"),this.getFaceElements(".faceIntroverted"+(void 0!==i?t:"")).forEach(r),s||(this.showingIntroverts=!1)}}(),showPlastics:function(){this.getFaceElements().forEach(function(t){t.classList.remove("faceTransparent")}),this.showingPlastics=!0},hidePlastics:function(){this.getFaceElements().forEach(function(t){t.classList.add("faceTransparent")}),this.showingPlastics=!1},hideStickers:function(){this.getFaceElements(" .sticker").forEach(r),this.showingStickers=!1},showStickers:function(){this.getFaceElements(" .sticker").forEach(t),this.showingStickers=!0},showWireframes:function(){this.getFaceElements(" .wireframe").forEach(t),this.showingWireframes=!0},hideWireframes:function(){this.getFaceElements(" .wireframe").forEach(r),this.showingWireframes=!1},showIds:function(){this.getFaceElements(" .id").forEach(t),this.showingIds=!0},hideIds:function(){this.getFaceElements(" .id").forEach(r),this.showingIds=!1},showTexts:function(){this.getFaceElements(" .text").forEach(t),this.showingTexts=!0},hideTexts:function(){this.getFaceElements(" .text").forEach(r),this.showingTexts=!1},getOpacity:function(){return this.opacity},setOpacity:function(t,i){if(this.opacityTween&&this.opacityTween.stop(),void 0===t&&(t=1),t!==this.opacity){var r=this,n=(t-this.opacity).absolute().scale(0,1,0,200);this.opacityTween=new e.Tween({opacity:this.opacity}).to({opacity:t},n).easing(e.Easing.Quadratic.InOut).onUpdate(function(){r.css3DObject.element.style.opacity=this.opacity,r.opacity=this.opacity}).onComplete(function(){i instanceof Function&&i()}).start()}},getStickersOpacity:function(){return parseFloat(this.getFaceElements(" .sticker")[0].style.opacity)},setStickersOpacity:function(t){void 0===t&&(t=.2);var e=t;this.getFaceElements(" .sticker").forEach(function(t){t.style.opacity=e.toString()})}}}(),t.Cube=function(e){t.Group.call(this),e=e||{},this.paused=void 0===e.paused?!1:e.paused,this.autoRotate=void 0===e.autoRotate?!1:e.autoRotate,this.keyboardControlsEnabled=void 0===e.keyboardControlsEnabled?!0:e.keyboardControlsEnabled,this.mouseControlsEnabled=void 0===e.mouseControlsEnabled?!0:e.mouseControlsEnabled;var r=e.renderer||t.renderers.CSS3D;e.textureSize=void 0===e.textureSize?120:e.textureSize,this.isShuffling=!1,this.isReady=!0,this.undoing=this.isSolving=!1,this.render=!0,this.finalShuffle=null,this.hideInvisibleFaces=void 0===e.hideInvisibleFaces?!1:e.hideInvisibleFaces,this.moveCounter=this.time=0,this.taskQueue=new t.Queue,this.twistQueue=new t.Queue(t.Twist.validate),this.historyQueue=new t.Queue(t.Twist.validate),this.twistDuration=void 0!==e.twistDuration?e.twistDuration:500,this.shuffleMethod=this.PRESERVE_LOGO,this.size=3*e.textureSize,this.cubeletSize=this.size/3,this.camera=new i.PerspectiveCamera(35,window.innerWidth/window.innerHeight,1,6e3),this.camera.position.z=4*this.size,this.object3D=new i.Object3D,this.autoRotateObj3D=new i.Object3D,this.rotation=this.object3D.rotation,this.quaternion=this.object3D.quaternion,this.position=this.object3D.position,this.matrix=this.object3D.matrix,this.matrixWorld=this.object3D.matrixWorld,this.rotation.set(25*Math.PI/180,-30*Math.PI/180,0),this.rotationDelta=new i.Euler(.1*Math.PI/180,.15*Math.PI/180,0),this.cubelets=[],[[n,s,,,c],[n,s,,,,],[n,s,o,,,],[n,,,,c],[n,,,,,],[n,,o,,,],[n,,,a,c],[n,,,a,,],[n,,o,a,,],[,s,,,c],[,s,,,,],[,s,o,,,],[,,,,c],[,,,,,],[,,o,,,],[,,,a,c],[,,,a,,],[,,o,a,,],[,s,,,c,u],[,s,,,,u],[,s,o,,,u],[,,,,c,u],[,,,,,u],[,,o,,,u],[,,,a,c,u],[,,,a,,u],[,,o,a,,u]].forEach(function(e,i){this.cubelets.push(new t.Cubelet(this,i,e))}.bind(this)),this.core=new t.Group,this.centers=new t.Group,this.edges=new t.Group,this.corners=new t.Group,this.crosses=new t.Group,this.cubelets.forEach(function(t){"core"===t.type&&this.core.add(t),"center"===t.type&&this.centers.add(t),"edge"===t.type&&this.edges.add(t),"corner"===t.type&&this.corners.add(t),"center"!==t.type&&"edge"!==t.type||this.crosses.add(t)}.bind(this)),this.left=new t.Slice([24,21,18,15,12,9,6,3,0],this),this.left.name="left",this.middle=new t.Slice([25,22,19,16,13,10,7,4,1],this),this.middle.name="middle",this.right=new t.Slice([2,11,20,5,14,23,8,17,26],this),this.right.name="right",this.right.neighbour=this.middle,this.left.neighbour=this.middle,this.up=new t.Slice([18,19,20,9,10,11,0,1,2],this),this.up.name="up",this.equator=new t.Slice([21,22,23,12,13,14,3,4,5],this),this.equator.name="equator",this.down=new t.Slice([8,17,26,7,16,25,6,15,24],this),this.down.name="down",this.down.neighbour=this.equator,this.up.neighbour=this.equator,this.front=new t.Slice([0,1,2,3,4,5,6,7,8],this),this.front.name="front",this.standing=new t.Slice([9,10,11,12,13,14,15,16,17],this),this.standing.name="standing",this.back=new t.Slice([26,23,20,25,22,19,24,21,18],this),this.back.name="back",this.back.neighbour=this.standing,this.front.neighbour=this.standing,this.faces=[this.front,this.up,this.right,this.down,this.left,this.back],this.slices=[this.left,this.middle,this.right,this.down,this.equator,this.up,this.back,this.standing,this.front];var h=function(t){this.dispatchEvent(new CustomEvent("onTwistComplete",{detail:{slice:t.target}}))}.bind(this);this.slices.forEach(function(t){t.addEventListener("change",h)});var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26];this.slicesDictionary={f:this.front,s:this.standing,b:this.back,u:this.up,e:this.equator,d:this.down,r:this.right,m:this.middle,l:this.left,x:new t.Slice(l,this),y:new t.Slice(l,this),z:new t.Slice(l,this)},this.slicesDictionary.x.ableToHideInternalFaces=!1,this.slicesDictionary.y.ableToHideInternalFaces=!1,this.slicesDictionary.z.ableToHideInternalFaces=!1,this.slicesDictionary.x.axis.set(-1,0,0),this.slicesDictionary.y.axis.set(0,-1,0),this.slicesDictionary.z.axis.set(0,0,-1),this.cubelets.forEach(function(t,e){t.setAddress(e)}),this.renderer=r(this.cubelets,this),this.domElement=this.renderer.domElement,this.domElement.classList.add("cube"),this.domElement.style.fontSize=this.cubeletSize+"px",this.autoRotateObj3D.add(this.object3D),this.hideInvisibleFaces&&this.hideIntroverts(null,!0),this.mouseInteraction=new t.Interaction(this,this.camera,this.domElement),this.mouseInteraction.addEventListener("click",function(t){this.dispatchEvent(new CustomEvent("click",{detail:t.detail}))}.bind(this)),this.controls=new(e.controls||t.Controls)(this,this.camera,this.domElement),this.folds=[new t.Fold(this.front,this.right),new t.Fold(this.left,this.up),new t.Fold(this.down,this.back)],this.setSize(400,200),this.loop=this.loop.bind(this),requestAnimationFrame(this.loop),document.addEventListener("keypress",function(t){"input"!==t.target.tagName.toLowerCase()&&"textarea"!==t.target.tagName.toLowerCase()&&!this.mouseInteraction.active&&this.keyboardControlsEnabled&&(t=String.fromCharCode(t.which),0<="XxRrMmLlYyUuEeDdZzFfSsBb".indexOf(t)&&this.twist(t))}.bind(this))},t.Cube.prototype=Object.create(t.Group.prototype),t.Cube.prototype.constructor=t.Cube,t.extend(t.Cube.prototype,{shuffle:function(e,i){e=e||30,i=i||"";var r,n,s=this.shuffleMethod.slice(),o=new t.Twist,a=i.length,c=0;for(this.twistQueue.empty(!0),this.historyQueue.empty(!0);0<e--;){if(i)r.set(i[c]),c=(c+1)%a;else for(n=s.split(""),r=(new t.Twist).copy(o);r.equals(o);)r.set(n.splice(Math.floor(Math.random()*n.length),1)[0]);r.isShuffle=!0,this.twist(r),o=r.getInverse()}this.finalShuffle=r},solve:function(){this.isSolving=!0},isSolved:function(){return this.front.isSolved(t.Direction.FRONT)&&this.up.isSolved(t.Direction.UP)&&this.right.isSolved(t.Direction.RIGHT)&&this.down.isSolved(t.Direction.DOWN)&&this.left.isSolved(t.Direction.LEFT)&&this.back.isSolved(t.Direction.BACK)},undo:function(){0<this.twistQueue.history.length&&(this.historyQueue.add(this.twistQueue.undo().getInverse()),this.undoing=!0)},redo:function(){0<this.twistQueue.future.length&&(this.undoing=!0,this.historyQueue.empty(),this.historyQueue.add(this.twistQueue.redo()))},twist:function(t){this.undoing&&this.twistQueue.empty(),this.historyQueue.empty(),this.undoing=!1,this.twistQueue.add(t)},immediateTwist:function(t){.8<=this.verbosity&&console.log("Executing a twist command to rotate the "+t.group+" "+t.wise+" by",t.degrees,"degrees.");for(var i,r=this.slicesDictionary[t.command.toLowerCase()],n=(void 0===t.degrees?90:t.degrees)*t.vector,s=n.degreesToRadians(),o=Math.abs(s-r.rotation)/(.5*Math.PI)*this.twistDuration,a=r.indices.length;0<a--;)r.getCubelet(a).isTweening=!0;new e.Tween(r).to({rotation:s},o).easing(e.Easing.Quartic.Out).onComplete(function(){for(r.rotation=s,r.axis.rotation=0,a=r.indices.length;0<a--;)i=r.getCubelet(a),i.isTweening=!1,i.updateMatrix(),i.matrixSlice.copy(i.matrix);0!==n&&(r.rotateGroupMappingOnAxis(s),this.dispatchEvent(new CustomEvent("onTwistComplete",{detail:{slice:r,twist:t}}))),t===this.finalShuffle&&(this.finalShuffle=null,this.dispatchEvent(new CustomEvent("onShuffleComplete",{detail:{slice:r,twist:t}})))}.bind(this)).start(this.time)},getText:function(t){return void 0===t?[this.folds[0].getText(),this.folds[1].getText(),this.folds[2].getText()]:r.isNumeric(t)&&t>=0&&2>=t?this.folds[t].getText():void 0},setText:function(t,e){void 0===e?(this.folds[0].setText(t),this.folds[1].setText(t),this.folds[2].setText(t)):r.isNumeric(e)&&e>=0&&2>=e&&this.folds[e].setText(t)},setSize:function(t,e){this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)},PRESERVE_LOGO:"RrLlUuDdSsBb",ALL_SLICES:"RrMmLlUuEeDdFfSsBb",EVERYTHING:"XxRrMmLlYyUuEeDdZzFfSsBb",loop:function(){var t=0;return function(){requestAnimationFrame(this.loop);var i="undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),r=i-(t||i);t=i,this.paused||(this.time+=r,e.update(this.time),this.autoRotate&&(this.rotation.x+=this.rotationDelta.x,this.rotation.y+=this.rotationDelta.y,this.rotation.z+=this.rotationDelta.z),this.isReady&&0===this.isTweening()&&(i=this.undoing?this.historyQueue:this.twistQueue,0===i.future.length?this.isSolving&&window.solver?this.isSolving=window.solver.consider(this):!0===this.taskQueue.isReady&&(i=this.taskQueue.do(),i instanceof Function&&i()):(r=i.do(),"x"!==r.command.toLowerCase()&&"y"!==r.command.toLowerCase()&&"z"!==r.command.toLowerCase()&&0!==r.degrees&&(this.moveCounter+=this.undoing?-1:1),(0===r.degrees||r.isShuffle)&&i.purge(r),this.immediateTwist(r))),this.mouseInteraction.enabled=this.mouseControlsEnabled&&!this.finalShuffle,this.mouseInteraction.update(),this.controls.enabled=this.mouseControlsEnabled&&!this.mouseInteraction.active,this.controls.update())}}()}),t.Solver=function(){this.logic=function(){return!1}},t.Solver.prototype.consider=function(e){return void 0===e?(console.warn("A cube [Cube] argument must be specified for Solver.consider()."),!1):0==e instanceof t.Cube?(console.warn("The cube argument provided is not a valid Cube."),!1):(e.isShuffling=!1,e.isSolved()?(t.Solver.prototype.explain("Ive found that the cube is already solved."),!1):this.logic(e))},t.Solver.prototype.hint=function(t){console.log("%c"+t+"%c\n","background-color: #EEE; color: #333","")},t.Solver.prototype.explain=function(t){console.log("Solver says: %c "+t+" %c\n","color: #080","")},window.ERNO=t,window._=r,window.TWEEN=window.TWEEN||e,window.THREE=window.THREE||i}();var scram,algo,algor;!function(t){t.fn.gce=function(e,i){return window.settings=t.extend({shufflespeed:10,speed:100,scramble:"",algorithm:"",highlight:"",text:"",florian:"0.1em"},e),this.filter("g-cube").each(function(){t(this).append('<div class="cubecont"></div>'),window.cube=new ERNO.Cube,cube.rotation.y=-.8,cube.twistDuration=settings.speed,cube.keyboardControlsEnabled=!1,cube.core.setOpacity(0),""!=settings.scramble&&(scram=ntscramble(settings.scramble.replace(/\/random/i,"").replace(/\/2-genR/i,"").replace(/\/2-genL/i,"").replace(/\/2-genM/i,"").replace(/\/3-genRF/i,"").replace(/\/3-genLF/i,"").replace(/\/3-genRL/i,"")),cube.twistDuration=settings.shufflespeed,settings.scramble.match("/random")?(cube.shuffleMethod=settings.scramble.match("/2-genR")?"RrUu":settings.scramble.match("/2-genM")?"MmUu":settings.scramble.match("/2-genL")?"RrUu":settings.scramble.match("/3-genRF")?"RrUuFf":settings.scramble.match("/3-genLF")?"LlUuFf":settings.scramble.match("/3-genRL")?"RrUuLl":"RrLlUuDdFfBb",cube.shuffle(25)):cube.twist(scram),cube.addEventListener("onShuffleComplete",function(){cube.twistDuration=settings.speed})),""!=settings.algorithm&&(algo=ntscramble(settings.algorithm),algor=ntsolve(settings.algorithm),cube.mouseControlsEnabled=!1,t(this).prepend('<button class="playalg" style="top: 0; z-index: 100">Play Algorithm</button><br>Speed:<input class="speedslider" type="range" min="10" max="1500" value="'+settings.speed+'">'),t(this).children(".playalg").click(function(){"Play Algorithm"==t(this).text()?(cube.twistDuration=t(".speedslider").val(),t(this).text("Reverse Algorithm"),cube.twist(algo)):(cube.twistDuration=10,cube.twist(algor),t(this).text("Play Algorithm"))}));var e=settings.highlight;cube.hideStickers(),e.match("edges")?(cube.edges.showStickers(),cube.centers.hideStickers(),cube.corners.hideStickers()):e.match("corners")?(cube.corners.showStickers(),cube.edges.hideStickers(),cube.centers.hideStickers()):e.match("centers")?(cube.centers.showStickers(),cube.edges.hideStickers(),cube.corners.hideStickers()):e.match("flcross")?(cube.down.cross.showStickers(),cube.centers.showStickers(),cube.rotation.x=100):e.match("flxcross")?(cube.down.cross.showStickers(),cube.centers.showStickers(),cube.hasId(5).showStickers(),cube.hasId(8).showStickers(),cube.rotation.x=100):!e.match("fl")||settings.highlight.match("flxcross")||settings.highlight.match("flcross")||settings.highlight.match("cfl")?e.match("cfl")?(cube.down.corners.showStickers(),cube.rotation.x=100):e.match("belt")?cube.equator.showStickers():e.match("f2l")?(cube.showStickers(),cube.up.hideStickers(),cube.centers.showStickers(),cube.rotation.x=100):!e.match("oll")||e.match("eoll")||e.match("coll")?e.match("eoll")?(cube.showStickers(),cube.up.corners.hideStickers(),t(".cubeletId-0 .faceLeft, .cubeletId-0 .faceFront, .cubeletId-1 .faceFront, .cubeletId-2 .faceFront, .cubeletId-2 .faceRight, .cubeletId-11 .faceRight, .cubeletId-20 .faceRight, .cubeletId-20 .faceBack, .cubeletId-19 .faceBack, .cubeletId-18 .faceBack, .cubeletId-18 .faceLeft, .cubeletId-9 .faceLeft").children(".sticker").css("display","none")):e.match("ocll")?(cube.showStickers(),cube.up.edges.hideStickers(),t(".cubeletId-0 .faceLeft, .cubeletId-0 .faceFront, .cubeletId-1 .faceFront, .cubeletId-2 .faceFront, .cubeletId-2 .faceRight, .cubeletId-11 .faceRight, .cubeletId-20 .faceRight, .cubeletId-20 .faceBack, .cubeletId-19 .faceBack, .cubeletId-18 .faceBack, .cubeletId-18 .faceLeft, .cubeletId-9 .faceLeft").children(".sticker").css("display","none")):e.match("coll")?(cube.showStickers(),t(".cubeletId-0 .faceLeft, .cubeletId-0 .faceFront, .cubeletId-1 .faceFront, .cubeletId-2 .faceFront, .cubeletId-2 .faceRight, .cubeletId-11 .faceRight, .cubeletId-20 .faceRight, .cubeletId-20 .faceBack, .cubeletId-19 .faceBack, .cubeletId-18 .faceBack, .cubeletId-18 .faceLeft, .cubeletId-9 .faceLeft").children(".sticker").css("display","none"),cube.up.corners.showStickers()):e.match("2x2x2")?(cube.showStickers(),cube.up.hideStickers(),cube.back.hideStickers(),cube.left.hideStickers(),cube.centers.showStickers(),cube.rotation.x=100):e.match("2x2x3")?(cube.showStickers(),cube.up.hideStickers(),cube.back.hideStickers(),cube.centers.showStickers(),cube.rotation.x=100):e.match("eoline")?(cube.showStickers(),cube.up.hideStickers(),cube.left.hideStickers(),cube.right.hideStickers(),cube.centers.showStickers(),cube.rotation.x=100):e.match("fb")?(cube.right.showStickers(),cube.up.hideStickers(),cube.rotation.x=100):e.match("f2b")?(cube.right.showStickers(),cube.left.showStickers(),cube.up.hideStickers(),cube.rotation.x=100):e.match("cmll")?(cube.right.showStickers(),cube.left.showStickers(),cube.up.hideStickers(),cube.up.corners.showStickers()):cube.showStickers():(cube.showStickers(),t(".cubeletId-0 .faceLeft, .cubeletId-0 .faceFront, .cubeletId-1 .faceFront, .cubeletId-2 .faceFront, .cubeletId-2 .faceRight, .cubeletId-11 .faceRight, .cubeletId-20 .faceRight, .cubeletId-20 .faceBack, .cubeletId-19 .faceBack, .cubeletId-18 .faceBack, .cubeletId-18 .faceLeft, .cubeletId-9 .faceLeft").children(".sticker").css("display","none")):(cube.down.showStickers(),cube.centers.showStickers(),cube.rotation.x=100),""!=settings.text&&(cube.showTexts(),cube.folds[0].setText(settings.text),cube.folds[1].setText(""),cube.folds[2].setText(""),cube.rotation.x=50.2),t(this).prepend("<style>.cube .cubeletId-0 .faceFront {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-0 .faceFront .sticker {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-0 .faceUp {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-0 .faceUp .sticker {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-0 .faceLeft {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-0 .faceLeft .sticker {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-1 .faceFront {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-1 .faceFront .sticker {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-1 .faceUp {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-1 .faceUp .sticker {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-2 .faceFront {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-2 .faceFront .sticker {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-2 .faceUp {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-2 .faceUp .sticker {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-2 .faceRight {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-2 .faceRight .sticker {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-3 .faceFront {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-3 .faceFront .sticker {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-3 .faceLeft {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-3 .faceLeft .sticker {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-4 .faceFront {  border-radius: "+settings.florian+";}.cube .cubeletId-4 .faceFront .sticker {  border-radius: "+settings.florian+";}.cube .cubeletId-5 .faceFront {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-5 .faceFront .sticker {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-5 .faceRight {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-5 .faceRight .sticker {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-6 .faceFront {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-6 .faceFront .sticker {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-6 .faceDown {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-6 .faceDown .sticker {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-6 .faceLeft {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-6 .faceLeft .sticker {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-7 .faceFront {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-7 .faceFront .sticker {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-7 .faceDown {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-7 .faceDown .sticker {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-8 .faceFront {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-8 .faceFront .sticker {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-8 .faceDown {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-8 .faceDown .sticker {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-8 .faceRight {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-8 .faceRight .sticker {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-9 .faceUp {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-9 .faceUp .sticker {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-9 .faceLeft {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-9 .faceLeft .sticker {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-10 .faceUp {  border-radius: "+settings.florian+";}.cube .cubeletId-10 .faceUp .sticker {  border-radius: "+settings.florian+";}.cube .cubeletId-11 .faceUp {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-11 .faceUp .sticker {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-11 .faceRight {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-11 .faceRight .sticker {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-12 .faceLeft {  border-radius: "+settings.florian+";}.cube .cubeletId-12 .faceLeft .sticker {  border-radius: "+settings.florian+";}.cube .cubeletId-14 .faceRight {  border-radius: "+settings.florian+";}.cube .cubeletId-14 .faceRight .sticker {  border-radius: "+settings.florian+";}.cube .cubeletId-15 .faceDown {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-15 .faceDown .sticker {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-15 .faceLeft {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-15 .faceLeft .sticker {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-16 .faceDown {  border-radius: "+settings.florian+";}.cube .cubeletId-16 .faceDown .sticker {  border-radius: "+settings.florian+";}.cube .cubeletId-17 .faceDown {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-17 .faceDown .sticker {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-17 .faceRight {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-17 .faceRight .sticker {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-18 .faceBack {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-18 .faceBack .sticker {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-18 .faceUp {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-18 .faceUp .sticker {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-18 .faceLeft {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-18 .faceLeft .sticker {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-19 .faceUp {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-19 .faceUp .sticker {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-19 .faceBack {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-19 .faceBack .sticker {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-20 .faceUp {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-20 .faceUp .sticker {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-20 .faceBack {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-20 .faceBack .sticker {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-20 .faceRight {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-20 .faceRight .sticker {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-21 .faceBack {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-21 .faceBack .sticker {  border-radius: "+settings.florian+" "+settings.florian+" 0 0;}.cube .cubeletId-21 .faceLeft {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-21 .faceLeft .sticker {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-22 .faceBack {  border-radius: "+settings.florian+";}.cube .cubeletId-22 .faceBack .sticker {  border-radius: "+settings.florian+";}.cube .cubeletId-23 .faceBack {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-23 .faceBack .sticker {  border-radius: 0 0 "+settings.florian+" "+settings.florian+";}.cube .cubeletId-23 .faceRight {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-23 .faceRight .sticker {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-24 .faceBack {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-24 .faceBack .sticker {  border-top-right-radius: "+settings.florian+";}.cube .cubeletId-24 .faceDown {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-24 .faceDown .sticker {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-24 .faceLeft {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-24 .faceLeft .sticker {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-25 .faceBack {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-25 .faceBack .sticker {  border-radius: 0 "+settings.florian+" "+settings.florian+" 0;}.cube .cubeletId-25 .faceDown {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-25 .faceDown .sticker {  border-radius: "+settings.florian+" 0 0 "+settings.florian+";}.cube .cubeletId-26 .faceRight {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-26 .faceRight .sticker {  border-top-left-radius: "+settings.florian+";}.cube .cubeletId-26 .faceDown {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-26 .faceDown .sticker {  border-bottom-left-radius: "+settings.florian+";}.cube .cubeletId-26 .faceBack {  border-bottom-right-radius: "+settings.florian+";}.cube .cubeletId-26 .faceBack .sticker {  border-bottom-right-radius: "+settings.florian+";}</style>"),"function"==typeof i&&i.call(),t(this).children(".cubecont").append(cube.domElement),console.log("gCube loaded."),console.log("Scramble: "+scram),console.log("Algorithm: "+algo),console.log("Highlight: "+algor)
}),this},t.fn.setspeed=function(t){return this.filter("g-cube").each(function(){cube.twistDuration=t,settings.speed=t}),this},t.fn.scramble=function(t){return this.filter("g-cube").each(function(){scram=ntscramble(t.replace(/\/random/i,"").replace(/\/2-genR/i,"").replace(/\/2-genL/i,"").replace(/\/2-genM/i,"").replace(/\/3-genRF/i,"").replace(/\/3-genLF/i,"").replace(/\/3-genRL/i,"")),cube.twistDuration=settings.shufflespeed,settings.scramble.match("/random")?(cube.shuffleMethod=t.match("/2-genR")?"RrUu":t.match("/2-genM")?"MmUu":t.match("/2-genL")?"RrUu":t.match("/3-genRF")?"RrUuFf":t.match("/3-genLF")?"LlUuFf":t.match("/3-genRL")?"RrUuLl":"RrLlUuDdFfBb",cube.shuffle(25)):cube.twist(scram),cube.addEventListener("onShuffleComplete",function(){cube.twistDuration=settings.speed})}),this},t.fn.setalg=function(e){return this.filter("g-cube").each(function(){algo=ntscramble(e),algor=ntsolve(e),cube.mouseControlsEnabled=!1,t(this).children(":not(.cube)").remove(),t(this).prepend('<button class="playalg" style="top: 0; z-index: 100">Play Algorithm</button><br>Speed:<input class="speedslider" type="range" min="10" max="1500" value="'+settings.speed+'">'),t(this).children(".playalg").click(function(){"Play Algorithm"==t(this).text()?(cube.twistDuration=t(".speedslider").val(),t(this).text("Reverse Algorithm"),cube.twist(algo)):(cube.twistDuration=10,cube.twist(algor),t(this).text("Play Algorithm"))})}),this},t.fn.highlight=function(e){return this.filter("g-cube").each(function(){cube.hideStickers(),e.match("edges")?(cube.edges.showStickers(),cube.centers.hideStickers(),cube.corners.hideStickers()):e.match("corners")?(cube.corners.showStickers(),cube.edges.hideStickers(),cube.centers.hideStickers()):e.match("centers")?(cube.centers.showStickers(),cube.edges.hideStickers(),cube.corners.hideStickers()):e.match("flcross")?(cube.down.cross.showStickers(),cube.centers.showStickers(),cube.rotation.x=100):e.match("flxcross")?(cube.down.cross.showStickers(),cube.centers.showStickers(),cube.hasId(5).showStickers(),cube.hasId(8).showStickers(),cube.rotation.x=100):!e.match("fl")||settings.highlight.match("flxcross")||settings.highlight.match("flcross")||settings.highlight.match("cfl")?e.match("cfl")?(cube.down.corners.showStickers(),cube.rotation.x=100):e.match("belt")?cube.equator.showStickers():e.match("f2l")?(cube.showStickers(),cube.up.hideStickers(),cube.centers.showStickers(),cube.rotation.x=100):!e.match("oll")||e.match("eoll")||e.match("coll")?e.match("eoll")?(cube.showStickers(),cube.up.corners.hideStickers(),t(".cubeletId-0 .faceLeft, .cubeletId-0 .faceFront, .cubeletId-1 .faceFront, .cubeletId-2 .faceFront, .cubeletId-2 .faceRight, .cubeletId-11 .faceRight, .cubeletId-20 .faceRight, .cubeletId-20 .faceBack, .cubeletId-19 .faceBack, .cubeletId-18 .faceBack, .cubeletId-18 .faceLeft, .cubeletId-9 .faceLeft").children(".sticker").css("display","none")):e.match("ocll")?(cube.showStickers(),cube.up.edges.hideStickers(),t(".cubeletId-0 .faceLeft, .cubeletId-0 .faceFront, .cubeletId-1 .faceFront, .cubeletId-2 .faceFront, .cubeletId-2 .faceRight, .cubeletId-11 .faceRight, .cubeletId-20 .faceRight, .cubeletId-20 .faceBack, .cubeletId-19 .faceBack, .cubeletId-18 .faceBack, .cubeletId-18 .faceLeft, .cubeletId-9 .faceLeft").children(".sticker").css("display","none")):e.match("coll")?(cube.showStickers(),t(".cubeletId-0 .faceLeft, .cubeletId-0 .faceFront, .cubeletId-1 .faceFront, .cubeletId-2 .faceFront, .cubeletId-2 .faceRight, .cubeletId-11 .faceRight, .cubeletId-20 .faceRight, .cubeletId-20 .faceBack, .cubeletId-19 .faceBack, .cubeletId-18 .faceBack, .cubeletId-18 .faceLeft, .cubeletId-9 .faceLeft").children(".sticker").css("display","none"),cube.up.corners.showStickers()):e.match("2x2x2")?(cube.showStickers(),cube.up.hideStickers(),cube.back.hideStickers(),cube.left.hideStickers(),cube.centers.showStickers(),cube.rotation.x=100):e.match("2x2x3")?(cube.showStickers(),cube.up.hideStickers(),cube.back.hideStickers(),cube.centers.showStickers(),cube.rotation.x=100):e.match("eoline")?(cube.showStickers(),cube.up.hideStickers(),cube.left.hideStickers(),cube.right.hideStickers(),cube.centers.showStickers(),cube.rotation.x=100):e.match("fb")?(cube.right.showStickers(),cube.up.hideStickers(),cube.rotation.x=100):e.match("f2b")?(cube.right.showStickers(),cube.left.showStickers(),cube.up.hideStickers(),cube.rotation.x=100):e.match("cmll")?(cube.right.showStickers(),cube.left.showStickers(),cube.up.hideStickers(),cube.up.corners.showStickers()):cube.showStickers():(cube.showStickers(),t(".cubeletId-0 .faceLeft, .cubeletId-0 .faceFront, .cubeletId-1 .faceFront, .cubeletId-2 .faceFront, .cubeletId-2 .faceRight, .cubeletId-11 .faceRight, .cubeletId-20 .faceRight, .cubeletId-20 .faceBack, .cubeletId-19 .faceBack, .cubeletId-18 .faceBack, .cubeletId-18 .faceLeft, .cubeletId-9 .faceLeft").children(".sticker").css("display","none")):(cube.down.showStickers(),cube.centers.showStickers(),cube.rotation.x=100)}),this},t.fn.settext=function(t){return this.filter("g-cube").each(function(){cube.showTexts(),cube.folds[0].setText(t),cube.folds[1].setText(""),cube.folds[2].setText(""),cube.rotation.x=50.2}),this},t.fn.setflorian=function(e){return this.filter("g-cube").each(function(){t(this).children("style").remove(),t(this).prepend("<style>.cube .cubeletId-0 .faceFront {  border-bottom-right-radius: "+e+";}.cube .cubeletId-0 .faceFront .sticker {  border-bottom-right-radius: "+e+";}.cube .cubeletId-0 .faceUp {  border-top-right-radius: "+e+";}.cube .cubeletId-0 .faceUp .sticker {  border-top-right-radius: "+e+";}.cube .cubeletId-0 .faceLeft {  border-top-left-radius: "+e+";}.cube .cubeletId-0 .faceLeft .sticker {  border-top-left-radius: "+e+";}.cube .cubeletId-1 .faceFront {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-1 .faceFront .sticker {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-1 .faceUp {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-1 .faceUp .sticker {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-2 .faceFront {  border-bottom-left-radius: "+e+";}.cube .cubeletId-2 .faceFront .sticker {  border-bottom-left-radius: "+e+";}.cube .cubeletId-2 .faceUp {  border-top-left-radius: "+e+";}.cube .cubeletId-2 .faceUp .sticker {  border-top-left-radius: "+e+";}.cube .cubeletId-2 .faceRight {  border-bottom-right-radius: "+e+";}.cube .cubeletId-2 .faceRight .sticker {  border-bottom-right-radius: "+e+";}.cube .cubeletId-3 .faceFront {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-3 .faceFront .sticker {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-3 .faceLeft {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-3 .faceLeft .sticker {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-4 .faceFront {  border-radius: "+e+";}.cube .cubeletId-4 .faceFront .sticker {  border-radius: "+e+";}.cube .cubeletId-5 .faceFront {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-5 .faceFront .sticker {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-5 .faceRight {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-5 .faceRight .sticker {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-6 .faceFront {  border-top-right-radius: "+e+";}.cube .cubeletId-6 .faceFront .sticker {  border-top-right-radius: "+e+";}.cube .cubeletId-6 .faceDown {  border-top-right-radius: "+e+";}.cube .cubeletId-6 .faceDown .sticker {  border-top-right-radius: "+e+";}.cube .cubeletId-6 .faceLeft {  border-top-right-radius: "+e+";}.cube .cubeletId-6 .faceLeft .sticker {  border-top-right-radius: "+e+";}.cube .cubeletId-7 .faceFront {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-7 .faceFront .sticker {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-7 .faceDown {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-7 .faceDown .sticker {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-8 .faceFront {  border-top-left-radius: "+e+";}.cube .cubeletId-8 .faceFront .sticker {  border-top-left-radius: "+e+";}.cube .cubeletId-8 .faceDown {  border-bottom-right-radius: "+e+";}.cube .cubeletId-8 .faceDown .sticker {  border-bottom-right-radius: "+e+";}.cube .cubeletId-8 .faceRight {  border-top-right-radius: "+e+";}.cube .cubeletId-8 .faceRight .sticker {  border-top-right-radius: "+e+";}.cube .cubeletId-9 .faceUp {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-9 .faceUp .sticker {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-9 .faceLeft {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-9 .faceLeft .sticker {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-10 .faceUp {  border-radius: "+e+";}.cube .cubeletId-10 .faceUp .sticker {  border-radius: "+e+";}.cube .cubeletId-11 .faceUp {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-11 .faceUp .sticker {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-11 .faceRight {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-11 .faceRight .sticker {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-12 .faceLeft {  border-radius: "+e+";}.cube .cubeletId-12 .faceLeft .sticker {  border-radius: "+e+";}.cube .cubeletId-14 .faceRight {  border-radius: "+e+";}.cube .cubeletId-14 .faceRight .sticker {  border-radius: "+e+";}.cube .cubeletId-15 .faceDown {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-15 .faceDown .sticker {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-15 .faceLeft {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-15 .faceLeft .sticker {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-16 .faceDown {  border-radius: "+e+";}.cube .cubeletId-16 .faceDown .sticker {  border-radius: "+e+";}.cube .cubeletId-17 .faceDown {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-17 .faceDown .sticker {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-17 .faceRight {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-17 .faceRight .sticker {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-18 .faceBack {  border-top-left-radius: "+e+";}.cube .cubeletId-18 .faceBack .sticker {  border-top-left-radius: "+e+";}.cube .cubeletId-18 .faceUp {  border-bottom-right-radius: "+e+";}.cube .cubeletId-18 .faceUp .sticker {  border-bottom-right-radius: "+e+";}.cube .cubeletId-18 .faceLeft {  border-bottom-left-radius: "+e+";}.cube .cubeletId-18 .faceLeft .sticker {  border-bottom-left-radius: "+e+";}.cube .cubeletId-19 .faceUp {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-19 .faceUp .sticker {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-19 .faceBack {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-19 .faceBack .sticker {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-20 .faceUp {  border-bottom-left-radius: "+e+";}.cube .cubeletId-20 .faceUp .sticker {  border-bottom-left-radius: "+e+";}.cube .cubeletId-20 .faceBack {  border-bottom-left-radius: "+e+";}.cube .cubeletId-20 .faceBack .sticker {  border-bottom-left-radius: "+e+";}.cube .cubeletId-20 .faceRight {  border-bottom-left-radius: "+e+";}.cube .cubeletId-20 .faceRight .sticker {  border-bottom-left-radius: "+e+";}.cube .cubeletId-21 .faceBack {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-21 .faceBack .sticker {  border-radius: "+e+" "+e+" 0 0;}.cube .cubeletId-21 .faceLeft {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-21 .faceLeft .sticker {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-22 .faceBack {  border-radius: "+e+";}.cube .cubeletId-22 .faceBack .sticker {  border-radius: "+e+";}.cube .cubeletId-23 .faceBack {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-23 .faceBack .sticker {  border-radius: 0 0 "+e+" "+e+";}.cube .cubeletId-23 .faceRight {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-23 .faceRight .sticker {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-24 .faceBack {  border-top-right-radius: "+e+";}.cube .cubeletId-24 .faceBack .sticker {  border-top-right-radius: "+e+";}.cube .cubeletId-24 .faceDown {  border-top-left-radius: "+e+";}.cube .cubeletId-24 .faceDown .sticker {  border-top-left-radius: "+e+";}.cube .cubeletId-24 .faceLeft {  border-bottom-right-radius: "+e+";}.cube .cubeletId-24 .faceLeft .sticker {  border-bottom-right-radius: "+e+";}.cube .cubeletId-25 .faceBack {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-25 .faceBack .sticker {  border-radius: 0 "+e+" "+e+" 0;}.cube .cubeletId-25 .faceDown {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-25 .faceDown .sticker {  border-radius: "+e+" 0 0 "+e+";}.cube .cubeletId-26 .faceRight {  border-top-left-radius: "+e+";}.cube .cubeletId-26 .faceRight .sticker {  border-top-left-radius: "+e+";}.cube .cubeletId-26 .faceDown {  border-bottom-left-radius: "+e+";}.cube .cubeletId-26 .faceDown .sticker {  border-bottom-left-radius: "+e+";}.cube .cubeletId-26 .faceBack {  border-bottom-right-radius: "+e+";}.cube .cubeletId-26 .faceBack .sticker {  border-bottom-right-radius: "+e+";}</style>")}),this}}(jQuery),$(document).ready(function(){$("head").prepend('<link rel="stylesheet" type="text/css" href="http://molarmanful.github.io/MoyuWeilong/cubenologo.min.css">',function(){console.log("G-cube stylesheet loaded.")})});
